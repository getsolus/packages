name       : yosys
version    : 0.59.1
release    : 26
source     :
    - git|https://github.com/YosysHQ/yosys.git: v0.59.1
homepage   : https://yosyshq.net/yosys/
license    : ISC
component  : office.scientific
summary    : Yosys Open SYnthesis Suite
description: |
    Yosys is a framework for Verilog RTL synthesis. It currently has extensive Verilog-2005 support and provides a basic set of synthesis algorithms for various application domains.
clang      : true
networking : true
patterns   :
    - devel :
        - /usr/bin/yosys-config
        - /usr/share/yosys/include
builddeps  :
    - pkgconfig(libffi)
    - pkgconfig(libxcrypt)
    - pkgconfig(python3)
    - pkgconfig(tcl)
    - git
    - iverilog
    - libboost-devel
    - uv
build      : |
    %make \
        ABCREV=default \
        BOOST_PYTHON_LIB="-lpython%python3_version% -lboost_python312" \
        CONFIG=clang \
        LIBDIR=%libdir% \
        ENABLE_LIBYOSYS=1 \
        ENABLE_LTO=1 \
        ENABLE_PYOSYS=1 \
        PREFIX=%PREFIX% \
        PYTHON_DESTDIR=$(python3 -c "import site; print(site.getsitepackages()[0])")
check      : |
    (cd tests/simple  && bash run-test.sh)
    (cd tests/fsm     && bash run-test.sh)
    (cd tests/svtypes && bash run-test.sh)
    (cd tests/verilog && bash run-test.sh)
install    : |
    %make_install \
        ABCREV=default \
        PREFIX=%PREFIX%
