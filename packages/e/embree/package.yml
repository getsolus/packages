name       : embree
version    : 4.3.1
release    : 11
source     :
    - https://github.com/embree/embree/archive/refs/tags/v4.3.1.tar.gz : 824edcbb7a8cd393c5bdb7a16738487b21ecc4e1d004ac9f761e934f97bb02a4
homepage   : https://github.com/embree/embree
license    : Apache-2.0
component  : programming.library
summary    : High Performance Ray Tracing Kernels
description: |
    Intel® Embree is a collection of high-performance ray tracing kernels, developed at Intel. The target users of Intel® Embree are graphics application engineers who want to improve the performance of their photo-realistic rendering application by leveraging Embree's performance-optimized ray tracing kernels. The kernels are optimized for the latest Intel® processors with support for SSE, AVX, AVX2, and AVX-512 instructions. Intel® Embree supports runtime code selection to choose the traversal and build algorithms that best matches the instruction set of your CPU. We recommend using Intel® Embree through its API to get the highest benefit from future improvements.
clang      : yes # gcc uses a stupid amount of memory.
builddeps  :
    - pkgconfig(tbb)
    - ispc
setup      : |
    %patch -p1 -i $pkgfiles/0001-Use-llvm-objdump.patch
    %cmake_ninja \
      -DEMBREE_ISA_AVX512SKX=ON \
      -DEMBREE_ISA_AVX512KNL=OFF \
      -DEMBREE_ISPC_SUPPORT=ON \
      -DEMBREE_TUTORIALS=OFF
build      : |
    %ninja_build
install    : |
    %ninja_install
    rm -r $installdir/usr/share/doc/
