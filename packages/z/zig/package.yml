name       : zig
version    : 0.14.0
release    : 15
source     :
    - https://github.com/ziglang/zig/archive/refs/tags/0.14.0.tar.gz : b45589b782a9406a414a3cac201ca0243650f9bedcb453730c124bf6f07ab33f
homepage   : https://ziglang.org
license    : MIT
component  : programming
summary    : General-purpose programming language and toolchain for maintaining robust, optimal, and reusable software.
description: |
    General-purpose programming language and toolchain for maintaining robust, optimal, and reusable software.
clang      : yes
builddeps  :
    - git
    - llvm-devel
    - lld-devel
    - clang-devel
environment: |
     export CC=/usr/bin/clang
     export CXX=/usr/bin/clang++
     if [ -e /usr/bin/ccache ]; then
         export CMAKE_C_COMPILER_LAUNCHER=ccache
         export CMAKE_CXX_COMPILER_LAUNCHER=ccache
     fi
setup      : |
    %cmake_ninja -DZIG_TARGET_MCPU=baseline
build      : |
    %ninja_build
install    : |
    %ninja_install
check      : |
    # $installdir/usr/bin/zig build test -Dskip-release -Dskip-non-native
    pushd `mktemp -d`
        $installdir/usr/bin/zig init
        $installdir/usr/bin/zig build run
        $installdir/usr/bin/zig build test
    popd

