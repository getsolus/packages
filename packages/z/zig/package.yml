# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name       : zig
version    : 0.14.1
release    : 15
source     :
    - https://github.com/ziglang/zig/archive/refs/tags/0.14.1.tar.gz : f4e576ee050073f9cc42a2978994e07522701606678930b187e4d5e1334bfaf3
homepage   : https://ziglang.org
license    : MIT
component  : programming
summary    : General-purpose programming language and toolchain for maintaining robust, optimal, and reusable software.
description: |
    General-purpose programming language and toolchain for maintaining robust, optimal, and reusable software.
clang      : true
builddeps  :
    - clang-devel
    - git
    - lld-devel
environment: |
    export CC=/usr/bin/clang
    export CXX=/usr/bin/clang++
    if [ -e /usr/bin/ccache ]; then
        export CMAKE_C_COMPILER_LAUNCHER=ccache
        export CMAKE_CXX_COMPILER_LAUNCHER=ccache
    fi
setup      : |
    %cmake_ninja -DZIG_TARGET_MCPU=baseline
build      : |
    %ninja_build
install    : |
    %ninja_install
check      : |
    pushd `mktemp -d`
        $installdir/usr/bin/zig init
        $installdir/usr/bin/zig build run
        $installdir/usr/bin/zig build test
    popd
