# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name       : libplacebo
version    : 7.351.0
release    : 32
source     :
    - https://code.videolan.org/videolan/libplacebo/-/archive/v7.351.0/libplacebo-v7.351.0.tar.bz2 : d68159280842a7f0482dcea44a440f4c9a8e9403b82eccf185e46394dfc77e6a
license    : LGPL-2.1-or-later
component  : multimedia.library
homepage   : https://libplacebo.org/
summary    : Reusable library for GPU-accelerated image/video processing primitives and shaders, as well a batteries-included, extensible, high-quality rendering pipeline (similar to mpv's vo_gpu). Supports Vulkan and OpenGL.
description: |
    libplacebo is, in a nutshell, the core rendering algorithms and ideas of mpv rewritten as an independent library. As of today, libplacebo contains a large assortment of video processing shaders, focusing on both quality and performance.
builddeps  :
    - pkgconfig(dovi)
    - pkgconfig(lcms2)
    - pkgconfig(libglvnd)
    - pkgconfig(libunwind)
    - pkgconfig(libxxhash)
    - pkgconfig(shaderc)
    - pkgconfig(spirv-cross-c-shared)
    - pkgconfig(vulkan)
    - glslang-devel
    - python-glad2
    - python-jinja
clang      : true
setup      : |
    %patch -p1 -i $pkgfiles/ftbfs-glslang.patch

    %meson_configure -Ddemos=false \
                     -Dglslang=enabled
build      : |
    %ninja_build
install    : |
    %ninja_install
    %install_license LICENSE
check      : |
    %ninja_check
