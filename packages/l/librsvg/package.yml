# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name: librsvg
version: 2.61.3
release: 68
source:
    - https://download.gnome.org/sources/librsvg/2.61/librsvg-2.61.1.tar.xz: bc1bbcd419120b098db28bea55335d9de2470d4e6a9f6ee97207b410fc15867d
homepage: https://gitlab.gnome.org/GNOME/librsvg
license:
    - LGPL-2.1-or-later
component: desktop.library
summary: Library to render SVG files using Cairo
description: |
    A small library to render Scalable Vector Graphics (SVG), associated with the GNOME Project. It renders SVG files to Cairo surfaces. Cairo is the 2D, antialiased drawing library that GNOME uses to draw things to the screen or to generate output for printing
optimize: speed
networking: true
emul32: true
patterns:
    - devel:
          - /usr/bin
autodep: false # avoid the circular dep with librsvg/gdk-pixbuf/glycin
builddeps:
    - pkgconfig32(fontconfig)
    - pkgconfig32(gdk-pixbuf-2.0)
    - pkgconfig32(libjpeg)
    - pkgconfig32(libpng)
    - pkgconfig32(libtiff-4)
    - pkgconfig32(libxml-2.0)
    - pkgconfig32(pango)
    - pkgconfig32(xdamage)
    - pkgconfig32(xshmfence)
    - cargo-c
    - python-docutils # man
    - rust-32bit
    - vala
rundeps:
    - pango
    - glibc
    - glib2
    # gdk-pixbuf <- avoid the circular dep with librsvg/gdk-pixbuf/glycin
    - libxml2
    - libgcc
    - libcairo
    - 32bit:
          - glibc-32bit
          - librsvg
          - libgcc-32bit
          - gdk-pixbuf-32bit
          - libcairo-32bit
          - glib2-32bit
          - pango-32bit
          - libxml2-32bit
    - 32bit-devel:
          - librsvg-32bit
          - harfbuzz-32bit-devel
          - gdk-pixbuf-32bit-devel
          - pango-32bit-devel
          - librsvg-devel
          - libcairo-32bit-devel
          - glib2-32bit-devel
          - libxml2-32bit-devel
          - freetype2-32bit-devel
    - devel:
          - librsvg
          - pango-devel
          - glib2-devel
          - libcairo-devel
          - gdk-pixbuf-devel
          - harfbuzz-devel
          - freetype2-devel
          - libxml2-devel
setup: |
    flags='-Ddocs=disabled '
    if [ ! -z $EMUL32BUILD ]; then
        flags+='-Dtriplet=i686-unknown-linux-gnu -Dintrospection=disabled'
        pixbuf=enabled
    else
        pixbuf=disabled
    fi
    %meson_configure $flags -Dpixbuf-loader=$pixbuf
build: |
    %ninja_build
install: |
    %ninja_install
    rm -rf $installdir/usr/share/doc
