# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name       : lsfg-vk
version    : 1.0.0
release    : 4
source     :
    - git|https://github.com/PancakeTAS/lsfg-vk.git : v1.0.0
homepage   : https://github.com/PancakeTAS/lsfg-vk
license    : MIT
component  : games
summary    : Lossless Scaling Frame Generation on Linux via DXVK/Vulkan
description: |
    Lossless Scaling is a Windows-exclusive app with the goal of bringing frame generation (among other features) to every single game or app.
    lsfg-vk brings this frame generation to Linux users by acting as a Vulkan layer inbetween your game and your graphics card.
clang      : true
libsplit   : false
networking : true
builddeps  :
    - pkgconfig(gtk4)
    - pkgconfig(libadwaita-1)
    - pkgconfig(vulkan)
    - rust
    - vulkan-headers

setup      : |
    %cmake_ninja \
        -DCMAKE_BUILD_TYPE=Release \
        -DCMAKE_INTERPROCEDURAL_OPTIMIZATION=On

    pushd ui
    %cargo_fetch
build      : |
    %ninja_build

    pushd ui
    %cargo_build
install    : |
    %ninja_install

    pushd ui
    %cargo_install lsfg-vk-ui
    popd

    # Install appstream metainfo
    install -Dm00644 $pkgfiles/io.github.pancaketas.lsfg_vk.metainfo.xml -t $installdir/usr/share/metainfo/

    install -Dm00644 ui/rsc/gay.pancake.lsfg-vk-ui.desktop $installdir/usr/share/applications/gay.pancake.lsfg-vk-ui.desktop
    install -Dm00644 ui/rsc/icon.png $installdir/usr/share/icons/hicolor/256x256/apps/gay.pancake.lsfg-vk-ui.png
