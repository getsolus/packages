# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name       : libreswan
version    : '5.3'
release    : 13
source     :
    - https://download.libreswan.org/libreswan-5.3.tar.gz : c1d350c3f3296fd21b9db0794e23d3f319b292f880bf8178b82ef5c6391c60c0
homepage   : https://libreswan.org/
license    : GPL-2.0-or-later
component  : network.util
summary    : An Internet Key Exchange (IKE) implementation for Linux
description: |
    Libreswan is a free software implementation of the most widely supported and standarized VPN protocol based on ("IPsec") and the Internet Key Exchange ("IKE").
builddeps  :
    - pkgconfig(libcap-ng)
    - pkgconfig(libcurl)
    - pkgconfig(libldns)
    - pkgconfig(libselinux)
    - pkgconfig(libunbound)
    - pkgconfig(libxcrypt)
    - pkgconfig(nss)
    - docbook-xml
    - xmlto
conflicts  :
    - strongswan
environment: |
    export PREFIX=/usr
    export USE_DNSSEC=false
    export WERROR_CFLAGS=
build      : |
    %make programs 
install    : |
    %make_install \
        MANDIR=/usr/share/man \
        SYSCONFDIR=/usr/share/defaults \
        PENSWARETC=/usr/share/defaults
    %install_license COPYING

    install -D -m 00644 $pkgfiles/libreswan.tmpfiles $installdir/%libdir%/tmpfiles.d/libreswan.conf

    rm -r $installdir/etc
    rm -r $installdir/var
