name       : libpng
version    : 1.6.50
release    : 29
source     :
    - https://sourceforge.net/projects/libpng/files/libpng16/1.6.50/libpng-1.6.50.tar.gz : 708f4398f996325819936d447f982e0db90b6b8212b7507e7672ea232210949a
homepage   : https://www.libpng.org/pub/png/
license    : Libpng
component  : multimedia.library
summary    : libpng (Official PNG reference library)
description: |
    libpng is the official PNG reference library, supporting almost all PNG features and has been extensively tested.
emul32     : true
avx2       : true
builddeps  :
    - pkgconfig32(zlib)
setup      : |
    # Fails due to zlib-ng compression stream changes
    %patch -p1 -i $pkgfiles/0001-skip-pngtest-all.patch

    %configure --disable-static --enable-intel-sse
build      : |
    %make
install    : |
    %make_install
    rm -v $installdir/%libdir%/*.la
check      : |
    %make check || ( cat ./test-suite.log && exit 1 )
patterns   :
    - devel :
        - /usr/bin/libpng*-config
