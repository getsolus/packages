name       : gajim
version    : 1.3.3
release    : 17
source     :
    - https://gajim.org/downloads/1.3/gajim-1.3.3.tar.gz : ddbcbe6aaf36c238e0ca7503034ed0870a5b059a96e9a4f973409ecdeec4678c
homepage   : https://gajim.org
license    : GPL-3.0-or-later
component  : network.im
summary    : Full featured and easy to use Jabber/XMPP client
description: |
    The goal of Gajim is to provide a full featured and easy to use Jabber/XMPP client.
builddeps  :
    - libgtk-3          # Tests.
    - python-css-parser # Tests.
    - python-keyring    # Tests.
    - python-nbxmpp     # Tests.
    - python-openssl    # Tests.
    - python-packaging  # Tests.
    - python3-cairo     # Tests.
    - xorg-server-xvfb  # Tests.
rundeps    :
    - farstream                  # Audio/Video.
    - gstreamer-1.0-libav        # Audio/Video.
    - gstreamer-1.0-plugins-ugly # Audio/Video.
    - libgtk-3
    - python-css-parser
    - python-keyring
    - python-nbxmpp
    - python-openssl
    - python-packaging
    - python3-cairo
setup      : |
    %patch -p1 < $pkgfiles/0001-Fix-PyGIWarning.patch
build      : |
    %python3_setup
install    : |
    %python3_install
check      : |
    pushd $PKG_BUILD_DIR/py3build
        export PYTHONPATH=%installroot%/usr/lib/python%python3_version%/site-packages:$PWD
        xvfb-run python3 setup.py test
    popd
