# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name       : gajim
version    : 2.4.3
release    : 37
source     :
    - https://gajim.org/downloads/2.4/gajim-2.4.3.tar.gz : edcd1f47883789ecd1a1ac5685058a95a33d7d4a986bcbd0a4ad7feb8525e6d5
homepage   : https://gajim.org
license    : GPL-3.0-or-later
component  : network.im
summary    : Full featured and easy to use Jabber/XMPP client
description: |
    The goal of Gajim is to provide a full featured and easy to use Jabber/XMPP client.
builddeps  :
    - python-build
    - python-installer
    - python-packaging
    - python-setuptools
    - python-wheel
rundeps    :
    - farstream                  # Audio/Video.
    - gstreamer-1.0-plugin-libav # Audio/Video.
    - gstreamer-1.0-plugins-ugly # Audio/Video.
    - libgtksourceview5
    - python-css-parser
    - python-emoji
    - python-gssapi
    - python-h2
    - python-hpack
    - python-httpx
    - python-hyperframe
    - python-keyring
    - python-nbxmpp
    - python-omemo-dr
    - python-openssl
    - python-pillow
    - python-qrcode
    - python-sqlalchemy
    - python-truststore
setup      : |
    ./make.py build --dist unix
build      : |
    %python3_setup
install    : |
    %python3_install
    $workdir/make.py install --dist unix --prefix=$installdir/usr

    # Move locales to the system path
    mv $installdir/usr/lib/python%python3_version%/site-packages/gajim/data/locale $installdir/usr/share
    ln -sv /usr/share/locale $installdir/usr/lib/python%python3_version%/site-packages/gajim/data/locale

    %install_license COPYING
