# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name: gwyddion
version: '2.69'
release: 24
source:
    - https://sourceforge.net/projects/gwyddion/files/gwyddion/2.69/gwyddion-2.69.tar.xz: 597eb6b51ee575a07f350cc0573bc74d005a3490d9832ad136a369e70d30efa6
homepage: https://gwyddion.net/
license: GPL-2.0-or-later
component: office.scientific
summary: Free SPM (AFM, SNOM/NSOM, STM, MFM, ...) data analysis software
description: |
    Gwyddion is a modular program for SPM (scanning probe microscopy) data visualization and analysis. Primarily is is intended for the analysis of height fields obtained by SPM techniques (AFM, MFM, STM, SNOM/NSOM) and it supports a lot of SPM data formats.
builddeps:
    - pkgconfig(OpenEXR)
    - pkgconfig(bzip2)
    - pkgconfig(cfitsio)
    - pkgconfig(fftw3)
    - pkgconfig(glu)
    - pkgconfig(gtkglext-1.0)
    - pkgconfig(libpng)
    - pkgconfig(libwebp)
    - pkgconfig(libzip)
    - pkgconfig(xmu)
setup: |
    %patch -p1 -i $pkgfiles/OpenEXR-instead-of-ilmbase.patch
    %configure \
        --with-python=no \
        --enable-pygwy=no
build: |
    %make
install: |
    %make_install
    # Fix appstream generation
    mv $installdir/usr/share/applications/{gwyddion.desktop,net.gwyddion.Gwyddion.desktop}
