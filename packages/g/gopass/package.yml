# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name       : gopass
version    : 1.16.1
release    : 43
source     :
    - https://github.com/gopasspw/gopass/archive/refs/tags/v1.16.1.tar.gz#gopass.tar.gz : 33451a782b66266c59560a5ec7f4e34c104c501a36b445fc574fad71e3b3d884
    - https://github.com/gopasspw/git-credential-gopass/archive/refs/tags/v1.16.1.tar.gz#git-credential-gopass.tar.gz : 8382b98e56b4547232cc5ea8967eb2a7497a9821a50499d215dafc2f530ba32e
    - https://github.com/gopasspw/gopass-hibp/archive/refs/tags/v1.16.1.tar.gz#gopass-hibp.tar.gz : c1f2d990126257031d0e1397de87bf1879597d643aa5a00c011332479a576788
    - https://github.com/gopasspw/gopass-jsonapi/archive/refs/tags/v1.16.1.tar.gz#gopass-jsonapi.tar.gz : 73449a7c359836a995946e54d91e32afe5a54e1519b5a01f78c9923c13c0894f
    - https://github.com/gopasspw/gopass-summon-provider/archive/refs/tags/v1.16.1.tar.gz#gopass-summon-provider.tar.gz : 5e8acaccb020ac6691157c793937af940444bac77391d5f491b874d30e305da0
homepage   : https://www.gopass.pw
license    : MIT
component  : security
networking : true
summary    : The slightly more awesome standard unix password manager for teams
description: |
    gopass is a rewrite of the pass password manager in Go with the aim of making it cross-platform and adding additional features.
builddeps  :
    - golang
rundeps    :
    - git
    - gnupg
    - xdotool
    - xsel
setup      : |
    mkdir -p integrations
    for i in git-credential-gopass gopass-{hibp,jsonapi,summon-provider}; do
        tar -x -C integrations -f $sources/$i.tar.gz
    done
build      : |
    %make
    for i in integrations/*; do
        pushd $i; go mod tidy; popd
        %make -C $i
    done
install    : |
    %make_install PREFIX=/usr
    for i in integrations/*; do
        %make_install -C $i PREFIX=/usr
    done

    # Set correct permission bits for the shell completion files
    chmod 644 $installdir/usr/share/zsh/site-functions/_gopass
    chmod 644 $installdir/usr/share/bash-completion/completions/gopass
    chmod 644 $installdir/usr/share/fish/vendor_completions.d/gopass.fish
