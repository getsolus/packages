# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name: gpm
version: 1.20.7
release: 6
source:
    - git|https://github.com/telmich/gpm.git: e82d1a653ca94aa4ed12441424da6ce780b1e530
homepage: https://www.nico.schottelius.org/software/gpm/
license: GPL-1.0-only
summary: gpm (General Purpose Mouse daemon)
component: system.base
description: |
    GPM allows the use of a mouse in the console and xterm.
environment: export CFLAGS+=" -std=gnu17"
setup: |
    %patch -p1 -i $pkgfiles/0001-Support-a-stateless-configuration-for-Solus.patch
    %autogen.sh --disable-static
build: |
    %make -j1
install: |
    %make_install
    ln -sv $(readlink $installdir/%libdir%/libgpm.so.2) $installdir/%libdir%/libgpm.so
    for item in gpm-root.conf gpm-syn.conf gpm-twiddler.conf ; do
        install -D -m 00644 $pkgfiles/${item} $installdir/usr/share/defaults/gpm/${item}
    done
    rmdir $installdir/etc
