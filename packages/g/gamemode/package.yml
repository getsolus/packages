name       : gamemode
version    : '1.8.1'
release    : 13
source     :
    - https://github.com/FeralInteractive/gamemode/releases/download/1.8.1/gamemode-1.8.1.tar.xz : cdb117d05d65dbd03c0bd2104df874a1f878db8f23cc4d55bfa44e832482269e
license    : BSD-3-Clause
component  : games
libsplit   : no
emul32     : yes
homepage   : https://github.com/FeralInteractive/gamemode
summary    : Optimise Linux system performance on demand
description: |
    Automatic helper to optimise Linux system performance when gaming
builddeps  :
    - pkgconfig32(dbus-1)
    - pkgconfig32(inih)
    - pkgconfig32(libgcrypt)
    - pkgconfig32(liblzma)
    - pkgconfig32(libsystemd)
    - pkgconfig32(libzstd)
environment: |
    export CFLAGS="$CFLAGS -Wno-error=implicit-function-declaration"
setup      : |
    %meson_configure -Dwith-examples=false \
    -Dwith-pam-limits-dir=/usr/share/defaults/etc/security/limits.d \
    -Dwith-privileged-group=users
build      : |
    %ninja_build
install    : |
    %ninja_install
    install -Dm00644 example/gamemode.ini $installdir/usr/share/doc/gamemode/gamemode.ini

    # Cleanup
    find $installdir -type d -empty -delete
