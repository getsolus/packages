name       : ghcup
version    : 0.1.50.2
release    : 3
source     :
    - https://github.com/haskell/ghcup-hs/archive/refs/tags/v0.1.50.2.tar.gz : ba2a2ef799fa7810970e09b19a7fdd7b2360ddd64d8e9b0624ab640cca627b89
homepage   : https://www.haskell.org/ghcup/
license    : LGPL-3.0-only
component  : programming.haskell
summary    : GHCup is the main installer for the general purpose language Haskell.
description: |
    GHCup is the main installer for the general purpose language Haskell.
builddeps  :
    - pkgconfig(bzip2)
    - pkgconfig(gmp)
    - ghc
    - haskell-cabal-install
networking : true
rundeps    :
    - libffi-devel
    - ncurses-devel
setup      : |
    %cabal_configure -f+tar -f+tui --enable-tests \
                     --constraint='brick >=2.5 && <2.8'
    cabal install hspec-discover
    cp "$HOME/.cabal/bin/hspec-discover" /usr/bin/hspec-discover
build      : |
    %haskell_build -j1
install    : |
    %haskell_install exe:ghcup
    rm -rf $installdir/%libdir%
check      : |
    %haskell_check
