# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name       : asciinema
version    : 3.0.1
release    : 16
source     :
    - https://github.com/asciinema/asciinema/archive/refs/tags/v3.0.1.tar.gz : 612ecb265ccb316f07c9825bacd7301fd21f03a72b516edd370b0d3aa1adf2bb
homepage   : https://asciinema.org/
license    : GPL-3.0-or-later
component  : multimedia.video
summary    : Terminal session recorder and the best companion of asciinema.org
description: |
    Terminal session recorder and the best companion of asciinema.org
networking : true
builddeps  :
    - rust
environment: |
    export ASCIINEMA_GEN_DIR=$workdir
setup      : |
    %cargo_fetch
build      : |
    %cargo_build
install    : |
    %cargo_install

    # shell completions
    install -Dm00644 $workdir/completion/_asciinema $installdir/usr/share/zsh/site-functions/_asciinema
    install -Dm00644 $workdir/completion/asciinema.bash $installdir/usr/share/bash-completion/completions/asciinema
    install -Dm00644 $workdir/completion/asciinema.fish $installdir/usr/share/fish/vendor_completions.d/asciinema.fish

    # man pages
    for manpage in $workdir/man/asciinema*;
    do
        install -Dm00644 $manpage -t $installdir/usr/share/man/man1
    done    
