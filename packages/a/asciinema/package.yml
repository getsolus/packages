# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name       : asciinema
version    : 3.1.0
release    : 17
source     :
    - https://github.com/asciinema/asciinema/archive/refs/tags/v3.1.0.tar.gz : d07d22d9531fa98d2999dfc2ef27651efc3a4f5e5f46a78c3c306b69c466af8b
homepage   : https://asciinema.org/
license    : GPL-3.0-or-later
component  : multimedia.video
summary    : Terminal session recorder and the best companion of asciinema.org
description: |
    Terminal session recorder and the best companion of asciinema.org
networking : true
builddeps  :
    - rust
environment: |
    export ASCIINEMA_GEN_DIR=$workdir
setup      : |
    %cargo_fetch
build      : |
    %cargo_build
install    : |
    %cargo_install
    %install_license LICENSE

    # shell completions
    install -Dm00644 $workdir/completion/_asciinema $installdir/usr/share/zsh/site-functions/_asciinema
    install -Dm00644 $workdir/completion/asciinema.bash $installdir/usr/share/bash-completion/completions/asciinema
    install -Dm00644 $workdir/completion/asciinema.fish $installdir/usr/share/fish/vendor_completions.d/asciinema.fish

    # man pages
    for manpage in $workdir/man/asciinema*;
    do
        install -Dm00644 $manpage -t $installdir/usr/share/man/man1
    done    
