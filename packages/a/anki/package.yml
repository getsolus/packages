name       : anki
version    : 2.1.29
release    : 16
source     :
    - https://github.com/ankitects/anki/archive/2.1.29.tar.gz : 8e280577eceff968574e6fb8cb28598837b0098384d722de3537c63db029e0b1
license    : AGPL-3.0-or-later
component  : office.notes
networking : yes
summary    : Spaced repetition flashcard program.
description: |
    Anki is a spaced repetition flashcard program. "Anki" is the Japanese word for "memorization". The SM2 algorithm, created for SuperMemo in the late 1980s, forms the basis of the spaced repetition methods employed in the program.
builddeps  :
    - pkgconfig(portaudiocpp)
    - pkgconfig(pyside)
    - pkgconfig(python3)
    - flask-cors
    - git
    - nodejs
    - pip
    - PyAudio
    - pylint
    - python-beautifulsoup4
    - python-decorator
    - python-distro
    - python-jsonschema
    - python-markdown
    - python-mock
    - python-mypy
    - python-protobuf
    - python-pytest
    - python-qtpy
    - python-regex
    - python-requests
    - python-send2trash
    - python-toml
    - python-waitress
    - python-wheel
    - pyparsing
    - rsync
    - rustup
rundeps    :
    - flask-cors
    - gtk2-engine-murrine
    - mpv
    - PyAudio
    - python-decorator
    - python-beautifulsoup4
    - python-jsonschema
    - python-markdown
    - python-protobuf
    - python-qtpy
    - python-qtwebengine
    - python-send2trash
    - python-waitress
setup      : |
    #Fix Makefile and build scripts
    %apply_patches

    #create some binary links to satisfy rust build scripts
    mkdir -p $workdir/.bin
    ln -sv /usr/bin/ar $workdir/.bin/x86_64-solus-linux-ar
    ln -sv /usr/bin/ranlib $workdir/.bin/x86_64-solus-linux-ranlib
build      : |
    export PATH="$PATH:$workdir/.bin/"
    make build
install    : |
    pip3 install --isolated --root=$installdir --ignore-installed --no-deps $workdir/dist/*
    install -Dm00755 qt/runanki $installdir/usr/bin/anki
    install -Dm00644 qt/anki.desktop $installdir/usr/share/applications/anki.desktop
