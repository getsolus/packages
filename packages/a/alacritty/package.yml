# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name       : alacritty
version    : 0.16.1
release    : 37
source     :
    - https://github.com/alacritty/alacritty/archive/refs/tags/v0.16.1.tar.gz : b7240df4a52c004470977237a276185fc97395d59319480d67cad3c4347f395e
homepage   : https://alacritty.org
license    : Apache-2.0
component  : system.utils
summary    : A cross-platform, GPU-accelerated terminal emulator
description: |
    Alacritty is the fastest terminal emulator in existence.
    Using the GPU for rendering enables optimizations that simply aren't possible in other emulators.
networking : true
builddeps  :
    - pkgconfig(fontconfig)
    - pkgconfig(freetype2)
    - pkgconfig(scdoc)
    - rust
setup      : |
    %cargo_fetch
build      : |
    %cargo_build

    # Generate man page
    for fname in alacritty-bindings.5 alacritty-msg.1 alacritty.1 alacritty.5; do
        scdoc < extra/man/$fname.scd > extra/man/$fname
    done
install    : |
    %cargo_install

    # Install command completion
    install -Dm00644 extra/completions/alacritty.bash $installdir/usr/share/bash-completion/completions/alacritty
    install -Dm00644 extra/completions/_alacritty $installdir/usr/share/zsh/site-functions/_alacritty
    install -Dm00644 extra/completions/alacritty.fish $installdir/usr/share/fish/vendor_completions.d/alacritty.fish

    # Install man pages
    for fname in alacritty-bindings.5 alacritty-msg.1 alacritty.1 alacritty.5; do
        install -Dm00644 extra/man/$fname $installdir/usr/share/man/man${fname##*.}/$fname
    done

    # Install desktop file, icons and metainfo
    install -Dm00644 extra/linux/Alacritty.desktop $installdir/usr/share/applications/Alacritty.desktop
    install -Dm00644 extra/logo/alacritty-term+scanlines.svg $installdir/usr/share/icons/hicolor/scalable/apps/Alacritty.svg
    install -Dm00644 extra/linux/org.alacritty.Alacritty.appdata.xml -t $installdir/usr/share/metainfo/
