# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name: xdg-user-dirs
version: '0.19'
release: 12
source:
    - https://gitlab.freedesktop.org/xdg/xdg-user-dirs/-/archive/v0.19/xdg-user-dirs-v0.19.tar.gz: aa18765c6f48b6c61f2fb426656dba640920f8436a04733965146af4c9a1f5e1
homepage: https://www.freedesktop.org/wiki/Software/xdg-user-dirs/
component: desktop.core
license:
    - GPL-2.0-only
summary: Tool to manage well known user directories
description: |
    xdg-user-dirs is a tool to help manage "well known" user directories like the desktop folder and the music folder. It also handles localization (i.e. translation) of the filenames.
builddeps:
    - gettext-devel
setup: |
    %patch -p1 -i $pkgfiles/0001-Convert-to-a-stateless-configuration.patch
    %patch -p1 -i $pkgfiles/ftbfs-gettext.patch

    autoreconf -fvi -I /usr/share/gettext/m4
    %configure --disable-documentation
build: |
    %make
install: |
    %make_install
    install -m 00644 -D $pkgfiles/xdg-user-dirs.service $installdir/usr/lib/systemd/user/xdg-user-dirs.service
    install -D -d -m 00755 $installdir/usr/lib/systemd/user/default.target.wants
    ln -sv ../xdg-user-dirs.service $installdir/usr/lib/systemd/user/default.target.wants/xdg-user-dirs.service
