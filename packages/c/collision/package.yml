# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name       : collision
version    : 3.14.0
release    : 2
source     :
    - https://github.com/GeopJr/Collision/archive/refs/tags/v3.14.0.tar.gz : b71d983633712b2ca46ddf886e06d7f6439bb635935cca354cf9adc3b53a65f4
homepage   : https://collision.geopjr.dev/
license    : BSD-2-Clause
component  : system.utils
summary    : Check hashes for your files
description: |
    Check hashes for your files - A GUI tool to generate, compare and verify MD5, SHA-1, SHA-256, SHA-512, Blake3, CRC32 & Adler32 hashes.
networking : true
builddeps  :
    - pkgconfig(gobject-introspection-1.0)
    - pkgconfig(libadwaita-1)
    - pkgconfig(yaml-0.1)
    - crystal
    - gettext-devel
    - git
    - shards
setup      : |
    shards install
    sed -i -e '/gtk-update-icon-cache/d' -e '/glib-compile-schemas/d' Makefile
build      : |
    # It failed at different things when using multithread, use 1 job instead
    make -j1
    make metainfo
install    : |
    %make_install PREFIX="$installdir/usr"
    install -Dm00644 $workdir/nautilus-extension/collision-extension.py -t $installdir/usr/share/nautilus-python/extensions/
    install -Dm00644 $workdir/data/dev.geopjr.Collision.metainfo.xml -t $installdir/usr/share/metainfo/
    %install_license LICENSE
check      : |
    make check
    make validate-appstream
