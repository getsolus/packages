# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name       : ca-certs
version    : '20250807'
release    : 48
source     :
    # Use `update.py` to update
    - https://raw.githubusercontent.com/mozilla-firefox/firefox/d748dce7e8631ccba212e7963245bc20a7c3e2ad/security/nss/lib/ckfw/builtins/certdata.txt : 0078e6bdd280fd89e1b883174387aae84b3eae2ee263416a5f8a14ee7f179ae9
    - https://raw.githubusercontent.com/agl/extract-nss-root-certs/492d8c9/convert_mozilla_certdata.go : 30afd0ca1df9b7788b830485645c4a2f72b07c1c9eb5c66941ae3d0b87e9e623
homepage   : https://wiki.mozilla.org/CA
license    :
    - Apache-2.0 # Conversion script
    - MPL-2.0    # Actual cert file
component  : system.base
summary    : Certificate Authority Files
description: |
    The Public Key Inrastructure is used for many security issues in a Linux system. In order for a certificate to be trusted, it must be signed by a trusted agent called a Certificate Authority (CA).
extract    : false
builddeps  :
    - golang
setup      : |
    ln -s $sources/* $workdir
build      : |
    go run convert_mozilla_certdata.go --to-files

    # The bundle generation could be a usysconf trigger in future.
    cat *.pem > ca-certificates.crt
install    : |
    install -Dm00644 *.pem ca-certificates.crt -t $installdir/etc/ssl/certs
    asciify $installdir
