# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name       : carla
version    : 2.5.10
release    : 31
source     :
    - git|https://github.com/falkTX/Carla.git : v2.5.10
homepage   : https://kx.studio/Applications:Carla
license    : GPL-2.0-or-later
component  : multimedia.audio
summary    : Fully-featured audio plugin host
description: |
    Carla is a fully-featured audio plugin host, with support for many audio drivers and plugin formats.
builddeps  :
    - pkgconfig(Qt5Core)
    - pkgconfig(alsa)
    - pkgconfig(fftw3)
    - pkgconfig(fluidsynth)
    - pkgconfig(gtk+-2.0)
    - pkgconfig(gtk+-3.0)
    - pkgconfig(libavcodec)
    - pkgconfig(liblo)
    - pkgconfig(libpulse)
    - pkgconfig(lrdf)
    - pkgconfig(mxml)
    - pkgconfig(projectM-4)
    - pkgconfig(sndfile)
    - fltk-devel
    - python3-qt5
rundeps    :
    - lrdf
    - python-pyliblo3
    - python3-qt5
build      : |
    %make features
    %make
install    : |
    %make_install PREFIX=/usr
    %install_license doc/GPL.txt doc/LGPL.txt

    # Fix appstream processing
    mv $installdir/usr/share/applications/{carla.desktop,studio.kx.carla.desktop}

    # Don't use obsolete metainfo path
    install -Dm00644 $installdir/usr/share/appdata/studio.kx.carla.appdata.xml \
    $installdir/usr/share/metainfo/studio.kx.carla.metainfo.xml
    rm -rv $installdir/usr/share/appdata/
