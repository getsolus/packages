# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name       : cbindgen
version    : 0.29.2
release    : 24
source     :
    - https://github.com/mozilla/cbindgen/archive/refs/tags/v0.29.2.tar.gz : c7d4d610482390c70e471a5682de714967e187ed2f92f2237c317a484a8c7e3a
license    : MPL-2.0
component  : programming
networking : true
homepage   : https://github.com/mozilla/cbindgen
summary    : Tool for generating C bindings to Rust code
description: |
    A tool for generating C bindings to Rust code.
builddeps  :
    - rust
checkdeps  :
    - cython
# Breaks tests
ccache     : false
environment: |
    ## These all fix tests
    # Use LTO
    export CARGO_PROFILE_RELEASE_LTO=true CARGO_PROFILE_RELEASE_CODEGEN_UNITS=1
    # Use debug
    export CARGO_PROFILE_RELEASE_DEBUG=2
setup      : |
    %cargo_fetch
build      : |
    %cargo_build
install    : |
    %cargo_install
check      : |
    # Tests need nightly features
    RUSTC_BOOTSTRAP=1 %cargo_test
