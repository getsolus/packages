# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name       : czkawka
version    : 11.0.0
release    : 10
source     :
    - https://github.com/qarmin/czkawka/archive/refs/tags/11.0.0.tar.gz : d73793dd713a80b3dc052de1b69de4c94d1fef8b8ff3efb4ce8a285622354a26
homepage   : https://github.com/qarmin/czkawka
license    :
    - CC-BY-4.0
    - MIT
component  : system.utils
summary    :
    - Multi functional app to find duplicates, empty folders, similar images etc
    - ^krokiet: New Czkawka frontend written in Slint
description: |
    Czkawka is a simple, fast and free app to remove unnecessary files from your computer.
networking : true
builddeps  :
    - pkgconfig(gtk4)
    - rust
setup      : |
    %patch -p1 -i $pkgfiles/0001-Rename-Krokiet-app-icon.patch
    %cargo_fetch
build      : |
    %cargo_build --workspace
install    : |
    %cargo_install czkawka_gui czkawka_cli krokiet

    install -Dm00644 data/*.github.qarmin.*.desktop -t $installdir/usr/share/applications
    install -Dm00644 data/icons/*.github.qarmin.*.svg -t $installdir/usr/share/icons/hicolor/scalable/apps
    install -Dm00644 data/icons/com.github.qarmin.czkawka-symbolic.svg -t $installdir//usr/share/icons/hicolor/symbolic/apps
    install -Dm00644 data/*.github.qarmin.*.metainfo.xml -t $installdir/usr/share/metainfo
patterns:
    - ^krokiet:
          - /usr/bin/krokiet
          - /usr/share/icons/hicolor/scalable/apps/io.github.qarmin.krokiet.svg
          - /usr/share/applications/io.github.qarmin.krokiet.desktop
          - /usr/share/metainfo/io.github.qarmin.krokiet.metainfo.xml
