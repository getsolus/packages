# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name       : syncthingtray
version    : 2.0.6
release    : 1
source     :
    - https://github.com/Martchus/syncthingtray/archive/refs/tags/v2.0.6.tar.gz : 1df91eede8ce4f20a04664a93242f0dd0f79d6b0d5e45e0ad5f0ec6bb28c37f8
homepage   : https://martchus.github.io/syncthingtray/
license    : GPL-2.0-or-later
component  :
    - network.util
    - plasmoid       : desktop.kde
    - dolphin        : desktop.kde
summary    :
    - Provides a tray application and Qt-widgets based GUI for Syncthing
    - plasmoid       : Plasma Desktop widget/applet for Syncthing
    - dolphin        : Dolphin/KIO integration for Syncthing
description: |
    Syncthing Tray provides a tray icon and further platform integration for Syncthing.
builddeps  :
    - pkgconfig(KF6CoreAddons)
    - pkgconfig(Qt6Core)
    - pkgconfig(Qt6Linguist)
    - pkgconfig(Qt6Quick)
    - pkgconfig(Qt6Svg)
    - pkgconfig(Qt6UiTools)
    - pkgconfig(Qt6WebEngineCore)
    - pkgconfig(c++utilities)
    - kf6-kconfig-devel
    - kf6-kio-devel
    - libboost-devel
    - libplasma-devel
    - qtforkawesome-devel
    - qtutilities-devel
rundeps:
    - dolphin :
        - syncthingtray
    - plasmoid :
        - syncthingtray
    - syncthing
clang      : true
optimize   :
    - speed
    - thin-lto
setup      : |
    %cmake_ninja -DBUILD_SHARED_LIBS=ON -DQT_PACKAGE_PREFIX:STRING=Qt6 -DKF_PACKAGE_PREFIX:STRING=KF6 -DSYSTEMD_SUPPORT=ON -DWEBVIEW_PROVIDER:STRING=webengine -DJS_PROVIDER=qml
build      : |
    %ninja_build
install    : |
    %ninja_install

    # Install Licence
    %install_license LICENSE
    %install_license LICENSE.LESSER
    %install_license LICENSE.MPL-2.0

patterns:
    - plasmoid  :
      - /usr/lib64/qt6/plugins/plasma/applets/martchus.syncthingplasmoid.so
      - /usr/share/metainfo/io.github.martchus.syncthingplasmoid.metainfo.xml
      - /usr/share/plasma/plasmoids/martchus.syncthingplasmoid/*
      - /usr/share/syncthingplasmoid/*
    - dolphin:
      - /usr/lib64/qt6/plugins/kf6/kfileitemaction/libsyncthingfileitemaction.so
      - /usr/share/metainfo/io.github.martchus.syncthingfileitemaction.metainfo.xml
      - /usr/share/syncthingfileitemaction/*
