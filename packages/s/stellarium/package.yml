# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name       : stellarium
version    : '25.4'
release    : 41
source     :
    - https://github.com/Stellarium/stellarium/releases/download/v25.4/stellarium-25.4.tar.xz : e376e0dc28eae0f7c4b3686fed9c2129c69a87a371b33e24bd79559a5142d613
homepage   : https://stellarium.org/
license    : GPL-2.0-or-later
component  : office.scientific
summary    : Free open source planetarium application
description: |
    Stellarium is a free open source planetarium for your computer. It shows a realistic sky in 3D, just like what you see with the naked eye, binoculars or a telescope.
    It is being used in planetarium projectors. Just set your coordinates and go.
networking : true
builddeps  :
    - pkgconfig(Qt6Charts)
    - pkgconfig(Qt6Help)
    - pkgconfig(Qt6Multimedia)
    - pkgconfig(Qt6Positioning)
    - pkgconfig(Qt6SerialPort)
    - pkgconfig(Qt6WebChannel)
    - pkgconfig(Qt6WebEngineCore)
    - qt6-base-private-devel
rundeps    :
    - dejavu-fonts-ttf
setup      : |
    %patch -p1 -i $pkgfiles/qt-6.10.patch

    %cmake_ninja
build      : |
    %ninja_build
install    : |
    %ninja_install

    # use system fonts
    rm $installdir/usr/share/stellarium/data/DejaVuSans{Mono,}.ttf
    ln -s /usr/share/fonts/truetype/dejavu/DejaVuSans.ttf $installdir/usr/share/stellarium/data/DejaVuSans.ttf
    ln -s /usr/share/fonts/truetype/dejavu/DejaVuSansMono.ttf $installdir/usr/share/stellarium/data/DejaVuSansMono.ttf
