# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name       : python-cryptography
version    : 46.0.5
release    : 34
source     :
    - https://github.com/pyca/cryptography/archive/refs/tags/46.0.5.tar.gz : 7571f0e09a6d6eb22168993f94d35867b4dcbd0d34224e0eb7b392b905b3f12f
homepage   : https://cryptography.io
license    : Apache-2.0
component  : programming.python
networking : true
summary    : A package designed to expose cryptographic recipes and primitives to Python developers
description: |
    A package designed to expose cryptographic recipes and primitives to Python developers.
builddeps  :
    - pkgconfig(openssl)
    - pkgconfig(python3)
    - python-build
    - python-cffi
    - python-installer
    - python-maturin
    - python-setuptools
rundeps    :
    - python-cffi
checkdeps  :
    - pytest-runner
    - pytest-subtests
    - python-bcrypt
    - python-certifi
    - python-hypothesis
    - python-iso8601
    - python-pretend
    - python-pytest-benchmark
environment: |
    # Set these manually because we don't have a macro for this.
    # Usually, our Cargo build macro sets these options, but we're
    # not using that in this package.
    CARGO_BUILD_DEP_INFO_BASEDIR="${workdir}"; export CARGO_BUILD_DEP_INFO_BASEDIR;
    CARGO_NET_RETRY=5; export CARGO_NET_RETRY;
    CARGO_PROFILE_RELEASE_DEBUG="full"; export CARGO_PROFILE_RELEASE_DEBUG;
    CARGO_PROFILE_RELEASE_SPLIT_DEBUGINFO="off"; export CARGO_PROFILE_RELEASE_SPLIT_DEBUGINFO;
    CARGO_PROFILE_RELEASE_LTO="off"; export CARGO_PROFILE_RELEASE_LTO;
    CARGO_PROFILE_RELEASE_STRIP="none"; export CARGO_PROFILE_RELEASE_STRIP;
setup      : |
    %cargo_fetch
build      : |
    %python3_setup --skip-dependency-check
install    : |
    %python3_install
check      : |
    PYTHONPATH=${PWD}/vectors:${installdir}/usr/lib/python%python3_version%/site-packages \
        python3 -m pytest
