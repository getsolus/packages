name       : discover
version    : 6.0.3
release    : 8
source     :
    - https://cdn.download.kde.org/stable/plasma/6.0.3/discover-6.0.3.tar.xz : b29196211f8f84bfde92ed59366cb3bbc7fd6ce340b02266ad0bac26c1dc779e
homepage   : https://apps.kde.org/discover/
license    : GPL-2.0-or-later
component  : desktop.kde
summary    : UNSUPPORTED & EXPERIMENTAL (reserved for Solus Staff testing)
description: |
    WARNING: This package is **unsupported** and **experimental.**

    It is included at this early stage to make it easier for Solus Staff to test and debug it.

    Experienced contributors with packaging and bugreporting experience are welcome to help us test and report (non-duplicate!) problems here:

    See getsolus/packages#715 and getsolus/packages#716
optimize   : lto
builddeps  :
    - pkgconfig(Qt6Quick)
    - pkgconfig(Qt6WebView)
    - pkgconfig(flatpak)
    - pkgconfig(fwupd)
    - pkgconfig(packagekitqt6)
    - appstream-qt6-devel
    - attica-devel
    - extra-cmake-modules
    - kf6-karchive-devel
    - kf6-kauth-devel
    - kf6-kcmutils-devel
    - kf6-kcrash-devel
    - kf6-kdbusaddons-devel
    - kf6-kdeclarative-devel
    - kf6-kidletime-devel
    - kf6-kio-devel
    - kf6-kirigami-devel
    - kf6-knewstuff-devel
    - kf6-knotifications-devel
    - kf6-kstatusnotifieritem-devel
    - kf6-kuserfeedback-devel
    - kf6-purpose-devel
    - kirigami-addons-devel
rundeps    :
    - kirigami-addons
    - kf6-kirigami
    - kf6-kitemmodels
setup      : |
    # https://github.com/getsolus/discover/commit/61ddf4e7b0ef774bf79b69dd4ea964cb1ddc2554
    %patch -p1 -i $pkgfiles/0001-PackageKitBackend-Add-the-Drivers-menu-filtered-by-t.patch
    %cmake_kf6
build      : |
    %ninja_build
install    : |
    %ninja_install

    %qml6_cache

    #remove docs
    rm -rf $installdir/usr/share/doc
    rm $installdir/usr/share/icons/hicolor/scalable/apps/flatpak-discover.svg

    # TODO: Remove once this is ready for user testing
    # - the goal is to ensure that Solus SC picks up the scary summary + description text
    rm -fr $installdir/usr/share/metainfo/
