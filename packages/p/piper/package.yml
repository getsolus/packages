name       : piper
version    : '0.5.1'
release    : 20
source     :
    - git|https://github.com/libratbag/piper.git : 0.5.1
license    : GPL-2.0-or-later
component  : system.utils
summary    :
    - GTK application to configure gaming mice.
    - modaliases : These files are used by the Software Center for hardware detection.
description: |
    GTK application to configure gaming mice.
builddeps  :
    - pkgconfig(gtk+-3.0)
    - pkgconfig(json-glib-1.0)
    - pkgconfig(liblur)
    - pkgconfig(py3cairo)
    - pkgconfig(pygobject-3.0)
    - pkgconfig(python3)
    - python-evdev
    - python-gobject  # Our mkmodaliases script is lazy and uses gobject.
    - python-lxml
    - libratbag       # Produce modaliases from the libratbag data
rundeps    :
    - libratbag
    - python3-cairo
    - python-evdev
    - python-gobject
    - python-lxml
patterns   :
    - modaliases : /usr/share/linux-driver-management/modaliases
setup      : |
    %patch -p1 < $pkgfiles/0001-data-add-another-device-ID-for-G203.patch
    %patch -p1 < $pkgfiles/0002-data-add-SVG-for-the-Mx-Master-3.patch
    %meson_configure
build      : |
    %ninja_build
install    : |
    %ninja_install
    $pkgfiles/mkmodaliases.py

    # Let LDM know about our aliases
    install -Dm00644 piper.modaliases $installdir/usr/share/linux-driver-management/modaliases/piper.modaliases
