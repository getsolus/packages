# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name: pdfsam
version: 5.3.2
release: 11
source:
    - https://github.com/torakiki/pdfsam/archive/refs/tags/v5.3.2.tar.gz: e576743fd6e291a96e4d3e376fae69d5f1cdb9a09981137aabfc5fc4c955900e
homepage: https://pdfsam.org/
license: AGPL-3.0-only
component: office
summary: PDFsam Basic, a free, open source, multi-platform software designed to split, merge, extract pages, mix and rotate PDF files.
description: |
    PDFsam Basic, a free, open source, multi-platform software designed to split, merge, extract pages, mix and rotate PDF files.
builddeps:
    - apache-maven
    - openjdk-21-devel
rundeps:
    - openjdk-21
networking: true
environment: |
    export JAVA_HOME=/usr/lib64/openjdk-21
    export PATH=$JAVA_HOME/bin:$PATH
setup: |
    sed 's|http://|https://|' -i pom.xml
    sed -i 's|<argument>--vm=server</argument>||' pdfsam-basic/pom.xml
build: |
    export MAVEN_OPTS="-Dmaven.repo.local=./m2"
    mvn -DskipTests=true -Drelease -Dgpg.skip package
install: |
    install -Dm00644 $workdir/pdfsam-basic/target/assembled/lib/pdfsam-basic-$version.jar $installdir/usr/share/pdfsam/pdfsam.jar
    install -Dm00644 $workdir/pdfsam-docs/graphics/splash.png $installdir/usr/share/pdfsam/splash.png
    install -dm00755 $installdir/usr/share/pdfsam/lib/
    install -Dm00644 pdfsam-basic/target/assembled/lib/* $installdir/usr/share/pdfsam/lib/
    install -Dm00644 pdfsam-basic/src/deb/icon.svg $installdir/usr/share/icons/hicolor/scalable/apps/pdfsam.svg
    install -Dm00755 $pkgfiles/pdfsam.sh $installdir/usr/bin/pdfsam
    install -Dm00644 $pkgfiles/pdfsam.desktop $installdir/usr/share/applications/org.pdfsam.gui.PdfsamApp.desktop
    install -Dm00644 $pkgfiles/org.pdfsam.pdfsam_basic.metainfo.xml -t $installdir/usr/share/metainfo
