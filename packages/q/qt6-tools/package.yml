# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name       : qt6-tools
version    : 6.10.1
release    : 32
source     :
    - https://download.qt.io/official_releases/qt/6.10/6.10.1/submodules/qttools-everywhere-src-6.10.1.tar.xz : 8148408380ffea03101a26305c812b612ea30dbc07121e58707601522404d49b
homepage   : https://www.qt.io
license    :
    - GFDL-1.3-or-later
    - GPL-2.0-or-later
    - LGPL-3.0-or-later
component  :
    - ^qt6-assistant : desktop.qt
    - ^qt6-dbusviewer : desktop.qt
    - ^qt6-designer : desktop.qt
    - ^qt6-designer-libs : programming.library
    - ^qt6-doctools : desktop.qt
    - ^qt6-linguist : desktop.qt
    - demos : programming.library
    - desktop.qt
summary    :
    - ^qt6-assistant : Documentation browser for Qt6
    - ^qt6-dbusviewer : D-Bus debugger and viewer
    - ^qt6-designer : Design GUIs for Qt6 applications
    - ^qt6-designer-libs : Qt6 Designer runtime library
    - ^qt6-doctools : Qt6 documentation tools
    - ^qt6-linguist : Qt6 Linguist tools
    - demos : Programming examples for qt6-tools
    - Qt6 QtTools Module
description:
    - ^qt6-assistant : Documentation browser for Qt6
    - ^qt6-dbusviewer : D-Bus debugger and viewer
    - ^qt6-designer : Design GUIs for Qt6 applications
    - ^qt6-designer-libs : Qt6 Designer runtime library
    - ^qt6-doctools : Qt6 documentation tools
    - ^qt6-linguist : Qt6 Linguist tools
    - demos : Programming examples for qt6-tools
    - Qt is a set of libraries for developing applications. This package contains base tools, like string, xml, and network handling.
builddeps  :
    - pkgconfig(Qt6Qml)
    - pkgconfig(libzstd)
    - clang-devel
    - qt6-base-private-devel
rundeps    :
    - ^qt6-designer :
        - qt6-designer-libs
    - devel :
        - qt6-declarative-devel
        - qt6-designer-libs
        - qt6-doctools
        - qt6-linguist
clang      : true
optimize   :
    - speed
    - thin-lto
setup      : |
    %cmake_ninja \
        -DCMAKE_MESSAGE_LOG_LEVEL=STATUS \
        -DINSTALL_PUBLICBINDIR=usr/bin
build      : |
    %ninja_build
install    : |
    %ninja_install

    pushd $installdir
    install -dm00755 usr/bin
    while read _line; do
        ln -s $_line
    done < %workdir%/solusBuildDir/user_facing_tool_links.txt
    popd

    # Install icons
    install -Dm00644 src/assistant/assistant/images/assistant.png $installdir/usr/share/icons/hicolor/32x32/apps/assistant6.png
    install -Dm00644 src/assistant/assistant/images/assistant-128.png $installdir/usr/share/icons/hicolor/128x128/apps/assistant6.png
    install -Dm00644 src/linguist/linguist/images/icons/linguist-128-32.png $installdir/usr/share/icons/hicolor/128x128/apps/linguist6.png
    install -Dm00644 src/designer/src/designer/images/designer.png $installdir/usr/share/icons/hicolor/128x128/apps/designer6.png
    install -Dm00644 src/qdbus/qdbusviewer/images/qdbusviewer.png $installdir/usr/share/icons/hicolor/32x32/apps/qdbusviewer6.png
    install -Dm00644 src/qdbus/qdbusviewer/images/qdbusviewer-128.png $installdir/usr/share/icons/hicolor/128x128/apps/qdbusviewer6.png

    # Install desktop files
    install -Dm00644 $pkgfiles/designer6.desktop $installdir/usr/share/applications/designer6.desktop
    install -Dm00644 $pkgfiles/linguist6.desktop $installdir/usr/share/applications/linguist6.desktop
    install -Dm00644 $pkgfiles/assistant6.desktop $installdir/usr/share/applications/assistant6.desktop
    install -Dm00644 $pkgfiles/qdbusviewer6.desktop $installdir/usr/share/applications/qdbusviewer6.desktop

    # Install AppStream metainfo
    install -Dm00644 $pkgfiles/io.qt.Designer.metainfo.xml -t $installdir/usr/share/metainfo
    install -Dm00644 $pkgfiles/io.qt.Linguist.metainfo.xml -t $installdir/usr/share/metainfo
    install -Dm00644 $pkgfiles/io.qt.qdbusviewer.metainfo.xml -t $installdir/usr/share/metainfo
patterns   :
    - devel :
        - /usr/bin
        - /usr/lib64/qt6/bin
    - demos :
        - /usr/lib64/qt6/examples
    - main :
        - /usr/bin/qdbus6
        - /usr/lib64/qt6/bin/qdbus
    - ^qt6-assistant :
        - /usr/bin/assistant6
        - /usr/lib64/qt6/bin/assistant
        - /usr/share/applications/assistant6.desktop
        - /usr/share/icons/hicolor/*/apps/assistant6.png
    - ^qt6-dbusviewer :
        - /usr/bin/qdbusviewer6
        - /usr/lib64/qt6/bin/qdbusviewer
        - /usr/share/applications/qdbusviewer6.desktop
        - /usr/share/icons/hicolor/*/apps/qdbusviewer6.png
        - /usr/share/metainfo/io.qt.qdbusviewer.metainfo.xml
    - ^qt6-designer :
        - /usr/bin/designer6
        - /usr/lib64/qt6/bin/designer
        - /usr/share/applications/designer6.desktop
        - /usr/share/icons/hicolor/*/apps/designer6.png
        - /usr/share/metainfo/io.qt.Designer.metainfo.xml
    - ^qt6-designer-libs :
        - /usr/lib64/libQt6Designer*.so.*
        - /usr/lib64/cmake/Qt6Designer/
        - /usr/lib64/qt6/plugins/designer
    - ^qt6-doctools :
        - /usr/bin/qdistancefieldgenerator6
        - /usr/bin/qdoc6
        - /usr/lib64/qt6/bin/qdistancefieldgenerator
        - /usr/lib64/qt6/bin/qdoc
        - /usr/lib64/qt6/qhelpgenerator
        - /usr/lib64/qt6/qtattributionsscanner
    - ^qt6-linguist :
        - /usr/bin/linguist6
        - /usr/lib64/qt6/bin/lconvert
        - /usr/lib64/qt6/bin/linguist
        - /usr/lib64/qt6/bin/lrelease
        - /usr/lib64/qt6/bin/lupdate
        - /usr/lib64/qt6/lprodump
        - /usr/lib64/qt6/lrelease-pro
        - /usr/lib64/qt6/lupdate-pro
        - /usr/share/applications/linguist6.desktop
        - /usr/share/icons/hicolor/*/apps/linguist6.png
        - /usr/share/metainfo/io.qt.Linguist.metainfo.xml
        - /usr/share/qt6/phrasebooks
replaces   :
    - ^qt6-dbusviewer :
        - qdbusviewer6
    - ^qt6-designer :
        - designer6
