name       : qol-assist
version    : 1.1.0
release    : 18
source     :
    - git|https://github.com/getsolus/qol-assist.git : b4726518dbb44a3aef414978878c427a5dccf38c
homepage   : https://github.com/getsolus/qol-assist
license    : Apache-2.0
component  : system.base
summary    : QoL Assistance
description: |
    QoL Assist is a Solus tool to help rolling releases roll better over time, performing migratory functions automatically.
builddeps  :
    - pkgconfig(systemd)
    - golang
    - scdoc # man
networking : yes
build      : |
    %make PREFIX=/usr BINDIR=/usr/sbin
install    : |
    %make_install \
        PREFIX=/usr \
        SYSTEMDUNITDIR=$installdir/usr/lib/systemd/system \
        BINDIR=$installdir/usr/sbin \
        MANDIR=$installdir/usr/share/man/man1

    # Install all legacy triggers (just in case tm) as well as for testing
    for i in $pkgfiles/*.toml; do
        install -Dm00644 ${i} $installdir/usr/share/defaults/qol-assist.d/$(basename ${i})
    done

    install -D -d -m 00755 $installdir/usr/lib/systemd/system/sysinit.target.wants
    ln -sv ../qol-assist-migration.service $installdir/usr/lib/systemd/system/sysinit.target.wants/.
