# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name       : qpdf
version    : 12.3.2
release    : 29
source     :
    - https://github.com/qpdf/qpdf/archive/refs/tags/v12.3.2.tar.gz : 11ac1800f0d7334863fa1fce6a8b87b105897610bb6a25b9b883ba3f9f1aa4d7
homepage   : https://qpdf.sourceforge.io/
license    : Apache-2.0
component  : desktop.core
summary    : PDF manipulation library
description: |
    QPDF is a C++ library and set of programs that inspect and manipulate the structure of PDF files. It can encrypt and linearize files, expose the internals of a PDF file, and do many other operations useful to end users and PDF developers.
builddeps  :
    - pkgconfig(libturbojpeg)
setup      : |
    %cmake_ninja \
        -DBUILD_DOC=OFF \
        -DINSTALL_EXAMPLES=OFF \
        -DBUILD_STATIC_LIBS=OFF
build      : |
    %ninja_build
install    : |
    %ninja_install

    # install bash and zsh completions
    install -Dm00644 completions/bash/qpdf $installdir/usr/share/bash-completion/completions/qpdf
    install -Dm00644 completions/zsh/_qpdf $installdir/usr/share/zsh/site-functions/_qpdf

    rm -r $installdir/usr/share/doc
check      : |
    %ninja_check
    %install_license Artistic-2.0 LICENSE.txt NOTICE.md
