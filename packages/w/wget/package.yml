# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name       : wget
version    : 2.2.1
release    : 37
source     :
    - https://ftpmirror.gnu.org/gnu/wget/wget2-2.2.1.tar.gz : d7544b13e37f18e601244fce5f5f40688ac1d6ab9541e0fbb01a32ee1fb447b4
homepage   : https://gitlab.com/gnuwget/wget2
license    :
    - GPL-3.0-or-later # wget binary
    - LGPL-3.0-or-later # libwget
component  :
    - libs : programming.library
    - network.clients
summary    :
    - libs : Software library for wget
    - Retrieves files online supporting many known protocols
description: |
    GNU Wget is a free software package for retrieving files using HTTP, HTTPS and FTP, the most widely-used Internet protocols. It is a non-interactive commandline tool, so it may easily be called from scripts, cron jobs, terminals without X-Windows support, etc.
optimize   :
    - size
    - lto
builddeps  :
    - pkgconfig(bzip2)
    - pkgconfig(gpgme)
    - pkgconfig(libbrotlidec)
    - pkgconfig(libidn2)
    - pkgconfig(liblzma)
    - pkgconfig(libnghttp2)
    - pkgconfig(libpcre2-posix)
    - pkgconfig(libproxy-1.0)
    - pkgconfig(libpsl)
    - pkgconfig(libzstd)
    - pkgconfig(openssl)
    - pkgconfig(zlib)
    - doxygen
    - flex
    - gettext-devel
    - pandoc
setup      : |
    %reconfigure \
        --disable-static \
        --enable-libproxy \
        --with-bzip2 \
        --with-lzma
build      : |
    %make
install    : |
    %make_install
    %install_license COPYING COPYING.*

    # Included in the tarball
    install -Dm00644 docs/man/man1/wget2.1 -t %{installdir}/usr/share/man/man1

    # Use as wget binary
    ln -s wget2 ${installdir}/usr/bin/wget
    ln -s wget2.1 ${installdir}/usr/share/man/man1/wget.1

    # Not useful
    rm -v ${installdir}/usr/bin/wget2_noinstall
check      : |
    %make check
patterns   :
    - libs :
        - /usr/lib64/lib*.so.*
