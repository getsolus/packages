# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name: openjazz
version: '20240919'
release: 8
source:
    - https://github.com/AlisterT/openjazz/archive/20240919.tar.gz: c50193b630c375840026d729bb9dda6c7210b1523e62d7ae019ce2e37f806627
    - https://image.dosgamesarchive.com/games/jazz.zip: ed025415c0bc5ebc3a41e7a070551bdfdfb0b65b5314241152d8bd31f87c22da
homepage: https://alister.eu/jazz/oj/
license: GPL-2.0-or-later
component: games.platformer
summary: Jazz Jackrabbit reborn on Linux
description: |
    OpenJazz is a free, open-source version of the classic Jazz Jackrabbit games.
builddeps:
    - pkgconfig(sdl2)
setup: |
    %cmake_ninja -DDATAPATH=/usr/share/openjazz
build: |
    %ninja_build
install: |
    %ninja_install
    install -D -m 00644 $pkgfiles/openjazz.desktop $installdir/usr/share/applications/openjazz.desktop
    install -D -m 00644 $pkgfiles/openjazz.png $installdir/usr/share/pixmaps/openjazz.png
    mkdir jazz
    unzip $sources/jazz.zip -d jazz/
    install -d -m 00644 $installdir/usr/share/openjazz
    cp jazz/* $installdir/usr/share/openjazz/
    rm -f $installdir/usr/share/openjazz/*.{EXE,DOC,DIZ}
    cd $installdir/usr/share/openjazz
    mv BONUS.PSM bonus.psm
    mv ENDLEVEL.PSM endlevel.psm
    mv MENUSNG.PSM menusng.psm
    mv SONG0.PSM song0.psm
    mv SONG3.PSM song3.psm
    mv SONG17.PSM song17.psm
