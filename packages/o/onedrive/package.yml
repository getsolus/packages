# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name: onedrive
version: 2.5.9
release: 49
source:
    - https://github.com/abraunegg/onedrive/archive/refs/tags/v2.5.9.tar.gz: 2a1d28343e4f8fefe0129a4e8480b09bab5aec2697046fb3d03f34e18c0be4ab
homepage: https://abraunegg.github.io/
license: GPL-3.0-or-later
component: network.clients
summary: A complete tool to interact with OneDrive on Linux.
description: |
    CLI tool to access and update your OneDrive files. Featuring shared folders, support for OneDrive for Business, resumable uploads, real-time file monitoring and state caching.
builddeps:
    - pkgconfig(dbus-1)
    - pkgconfig(libcurl)
    - pkgconfig(sqlite3)
    - dmd
setup: |
    # Remove unneeded "documentation" files
    %patch -p1 -i $pkgfiles/remove_docs.patch

    %reconfigure --enable-completions --with-zsh-completion-dir=/usr/share/zsh/site-functions --with-fish-completion-dir=/usr/share/fish/vendor_completions.d
build: |
    %make
install: |
    %make_install
patterns:
    - /*
