# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name       : opentofu
version    : 1.11.3
release    : 11
source     :
    - https://github.com/opentofu/opentofu/archive/refs/tags/v1.11.3.tar.gz : bb79b27e586913f301ecf57e9aaac008582cc133a30c424d6775c5253f2acbeb
homepage   : https://opentofu.org/
license    : MPL-2.0
component  : programming.tools
summary    : OpenTofu lets you declaratively manage your cloud infrastructure.
description: |
    OpenTofu is an OSS tool for building, changing, and versioning infrastructure safely and efficiently. OpenTofu can manage existing and popular service providers as well as custom in-house solutions.
networking : true
replaces   :
    - terraform
    - dbginfo :
        - terraform-dbginfo
builddeps  :
    - golang
build      : |
    go build -ldflags "-X main.version=$version -X github.com/opentofu/opentofu/version.dev=no" -o tofu ./cmd/tofu

install    : |
    install -Dm00755 tofu $installdir/usr/bin/tofu
    %install_license LICENSE

    # Tofu expects completions to be generated by the user and does not ship them (yet) https://github.com/opentofu/opentofu/issues/2239
    install -Dm00664 $pkgfiles/tofu.bash $installdir/usr/share/bash-completion/completions/tofu
    install -Dm00664 $pkgfiles/tofu.fish $installdir/usr/share/fish/vendor_completions.d/tofu.fish
    install -Dm00664 $pkgfiles/tofu.zsh $installdir/usr/share/zsh/site-functions/_tofu
