# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name       : opentofu
version    : 1.10.7
release    : 8
source     :
    - https://github.com/opentofu/opentofu/archive/refs/tags/v1.10.3.tar.gz : 2279dbe3823282b7646d321106b43842203606b4eeddc1a1d3b9de51cdf74953
homepage   : https://opentofu.org/
license    : MPL-2.0
component  : programming.tools
summary    : OpenTofu lets you declaratively manage your cloud infrastructure.
description: |
    OpenTofu is an OSS tool for building, changing, and versioning infrastructure safely and efficiently. OpenTofu can manage existing and popular service providers as well as custom in-house solutions.
networking : true
replaces   :
    - terraform
    - dbginfo :
        - terraform-dbginfo
builddeps  :
    - golang
build      : |
    go build -ldflags "-X main.version=$version -X github.com/opentofu/opentofu/version.dev=no" -o tofu ./cmd/tofu

install    : |
    install -Dm00755 tofu $installdir/usr/bin/tofu

    # Tofu expects completions to be generated by the user and does not ship them (yet) https://github.com/opentofu/opentofu/issues/2239
    install -Dm00664 $pkgfiles/tofu.bash $installdir/usr/share/bash-completion/completions/tofu
    install -Dm00664 $pkgfiles/tofu.fish $installdir/usr/share/fish/vendor_completions.d/tofu.fish
    install -Dm00664 $pkgfiles/tofu.zsh $installdir/usr/share/zsh/site-functions/_tofu
