name       : opentofu
version    : 1.10.2
release    : 4
source     :
    - https://github.com/opentofu/opentofu/archive/refs/tags/v1.10.2.tar.gz : 442d51e0595e79a3eceb84d8a2891e691f7277d0da7dd34f87836692d4aeca91
homepage   : https://opentofu.org/
license    : MPL-2.0
component  : programming.tools
summary    : OpenTofu lets you declaratively manage your cloud infrastructure.
description: |
    OpenTofu is an OSS tool for building, changing, and versioning infrastructure safely and efficiently. OpenTofu can manage existing and popular service providers as well as custom in-house solutions.
networking : yes
replaces   :
    - terraform
    - dbginfo :
        - terraform-dbginfo
builddeps  :
    - golang
build      : |
    go build -ldflags "-X main.version=$version -X github.com/opentofu/opentofu/version.dev=no" -o tofu ./cmd/tofu

install    : |
    install -Dm00755 tofu $installdir/usr/bin/tofu

    # Tofu expects completions to be generated by the user and does not ship them (yet) https://github.com/opentofu/opentofu/issues/2239
    install -Dm00664 $pkgfiles/tofu.bash $installdir/usr/share/bash-completion/completions/tofu
    install -Dm00664 $pkgfiles/tofu.fish $installdir/usr/share/fish/vendor_completions.d/tofu.fish
    install -Dm00664 $pkgfiles/tofu.zsh $installdir/usr/share/zsh/site-functions/_tofu
