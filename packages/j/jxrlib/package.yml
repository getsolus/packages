# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name       : jxrlib
version    : 0.2.4
release    : 4
source     :
    - https://github.com/glencoesoftware/jxrlib/archive/v0.2.4.tar.gz : 324af02e341bcb9e3b31a6d6892f47231f95f9f87ab4fe7645be619dcaf965a7
homepage   : https://github.com/glencoesoftware/jxrlib
license    : BSD-2-Clause
component  : multimedia.graphics
summary    : Open source implementation of jpegxr
description: |
    An open source implementation of the jpegxr image format standard.
environment: |
    export CFLAGS="${CFLAGS} -Wno-error=incompatible-pointer-types"
setup      : |
    %patch -p1 -i $pkgfiles/usecmake.patch
    %patch -p1 -i $pkgfiles/gcc14-fix.patch
    sed -i '/#include <JXRGlue.h>/a #include <wchar.h>' jxrgluelib/JXRGlueJxr.c
    %cmake
build      : |
    %make SHARED=1 PREFIX=/usr
install    : |
    %make_install DIR_INSTALL=$installdir
