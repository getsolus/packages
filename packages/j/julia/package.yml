name       : julia
version    : 1.5.2
release    : 22
source     :
    - git|https://github.com/JuliaLang/julia.git : v1.5.2
license    : MIT
component  : programming
summary    : The Julia Language - A fresh approach to technical computing.
description: |
    Julia provides ease and expressiveness for high-level numerical computing, in the same way as languages such as R, MATLAB, and Python, but also supports general programming.
builddeps  :
    - pkgconfig(fftw3)
    - pkgconfig(libgit2)
    - pkgconfig(libssh2)
    - pkgconfig(libunwind)
    - pkgconfig(libpcre2-8)
    - arpack-devel
    - openblas-devel
    - suitesparse-devel
rundeps    :
    - arpack
    - libgit2
    - pcre2
    - suitesparse
patterns   :
    - docs : [/usr/share/doc]
networking : yes
build      : |
    sed -i /libcurl,CURL/d base/Makefile
    %make release prefix=/usr sysconfdir=/etc MARCH=x86-64 \
        LIBBLASNAME=libopenblas \
        LIBLAPACKNAME=libopenblas \
        USE_SYSTEM_ARPACK=1 \
        USE_SYSTEM_BLAS=1 \
        USE_SYSTEM_CURL=1 \
        USE_SYSTEM_FFTW=1 \
        USE_SYSTEM_GMP=1 \
        USE_SYSTEM_LAPACK=1 \
        USE_SYSTEM_LIBGIT2=1 \
        USE_SYSTEM_LIBSSH2=1 \
        USE_SYSTEM_LLVM=0 \
        USE_SYSTEM_MPFR=1 \
        USE_SYSTEM_PCRE=1 \
        USE_SYSTEM_SUITESPARSE=1 \
        USE_SYSTEM_ZLIB=1
install    : |
    # Avoid having the installation choke on too many parallel jobs
    %make_install -j1 release prefix=/usr sysconfdir=/etc MARCH=x86-64 \
        LIBBLASNAME=libopenblas \
        LIBLAPACKNAME=libopenblas \
        USE_SYSTEM_ARPACK=1 \
        USE_SYSTEM_BLAS=1 \
        USE_SYSTEM_CURL=1 \
        USE_SYSTEM_FFTW=1 \
        USE_SYSTEM_GMP=1 \
        USE_SYSTEM_LAPACK=1 \
        USE_SYSTEM_LIBGIT2=1 \
        USE_SYSTEM_LIBSSH2=1 \
        USE_SYSTEM_LLVM=0 \
        USE_SYSTEM_MPFR=1 \
        USE_SYSTEM_PCRE=1 \
        USE_SYSTEM_SUITESPARSE=1 \
        USE_SYSTEM_ZLIB=1
    echo '/usr/lib/julia' > julia.conf
    install -Dm00644 julia.conf $installdir/usr/share/ld.so.conf.d/julia.conf
