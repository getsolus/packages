# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name       : msodbcsql
version    : 17.10.6.1
release    : 7
source     :
    - https://packages.microsoft.com/rhel/9/prod/Packages/m/msodbcsql17-17.10.6.1-1.x86_64.rpm : fef58ed3e076e4b22edb4b14482dec2a664b9f33afa4528ec7ddf0d585b75508
    - https://packages.microsoft.com/rhel/9/prod/Packages/m/mssql-tools-17.10.1.1-1.x86_64.rpm : ee66f3d6b2ad27830c958150bd049194bfd4b65787c95abc3da3b3ca74024d4c
homepage   : https://learn.microsoft.com/en-us/sql/connect/odbc/microsoft-odbc-driver-for-sql-server
license    : Distributable
component  : database
extract    : false
summary    : Microsoft ODBC Driver for SQL Server
description: |
    The Microsoft ODBC Driver allows you to connect to a MS SQL Server from the Linux command line
builddeps  :
    - pkgconfig(rpm)
    - unixodbc-devel
setup      : |
    rpm2cpio $sources/msodbcsql17-17.10.6.1-1.x86_64.rpm | cpio -idmv
    rpm2cpio $sources/mssql-tools-17.10.1.1-1.x86_64.rpm | cpio -idmv
    %patch -p1 -i $pkgfiles/0001-Fix-library-path.patch
install    : |
    install -Dm00644 opt/microsoft/msodbcsql17/share/resources/en_US/* -t $installdir/usr/share/resources/en_US/
    install -Dm00644 opt/mssql-tools/share/resources/en_US/* -t $installdir/usr/share/resources/en_US/
    install -Dm00644 opt/microsoft/msodbcsql17/include/* -t $installdir/usr/include
    install -Dm00644 opt/microsoft/msodbcsql17/lib64/* -t $installdir/usr/lib64
    install -Dm00644 opt/microsoft/msodbcsql17/etc/* -t $installdir/etc/msodbcsql
    install -Dm00755 opt/mssql-tools/bin/* -t $installdir/usr/bin
    cp -r usr/share/doc $installdir/usr/share/
    ln -s /usr/lib64/libcrypto.so $installdir/usr/lib64/libcrypto.so.10
    ln -s /usr/lib64/libssl.so $installdir/usr/lib64/libssl.so.10
