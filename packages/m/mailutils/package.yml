# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name: mailutils
version: '3.20'
release: 23
source:
    - https://ftpmirror.gnu.org/gnu/mailutils/mailutils-3.20.tar.xz: a8f3faab1edda5188bb5ca3e4e9c0c5bc72cd0dadf4e1f4799d27fa75c6ae829
homepage: https://mailutils.org/
license:
    - GPL-3.0-or-later
    - LGPL-3.0-or-later
component: network.mail
summary: Mail Utils
description: |
    Mailutils is a swiss army knife of electronic mail handling. It offers a rich set of utilities and daemons for processing the e-mail.
builddeps:
    - pkgconfig(fribidi)
    - pkgconfig(gnutls)
    - pkgconfig(krb5)
    - pkgconfig(libxcrypt)
    - pkgconfig(python3)
    - gdbm-devel
environment: |
    export CFLAGS="${CFLAGS} -Wno-incompatible-pointer-types"
setup: |
    %configure --disable-static \
        --enable-ipv6 \
        --without-ldap \
        --with-fribidi \
        --with-gnutls \
        --with-gdbm
build: |
    %make
install: |
    %make_install
check: |
    # CCache and fakeroot both break parts of the tests
    unset LD_PRELOAD
    export CCACHE_DISABLE=1

    %make check
