name       : mumble
version    : 1.2.16
release    : 5
source     :
    - https://github.com/mumble-voip/mumble/releases/download/1.2.16/mumble-1.2.16.tar.gz : ebd43860786f91a141e1347aa01379163f29530493bbc0186798c37faae37ac6
license    : BSD-3-Clause
component  : network.clients
summary    : High quality voice chat software
description: |
    Mumble is an open source, low-latency, high quality voice chat software primarily intended for use while gaming.
builddeps  :
    - pkgconfig(alsa)
    - pkgconfig(avahi-compat-libdns_sd)
    - pkgconfig(gl)
    - pkgconfig(libpulse)
    - pkgconfig(opus)
    - pkgconfig(protobuf)
    - pkgconfig(QtCore)
    - pkgconfig(sndfile)
    - pkgconfig(speex)
    - pkgconfig(x11)
    - pkgconfig(xi)
    - libboost-devel
    - libcap2-devel
setup      : |
    ln -s /usr/bin/moc-qt4 /usr/bin/moc
    ln -s /usr/bin/rcc-qt4 /usr/bin/rcc
    ln -s /usr/bin/uic-qt4 /usr/bin/uic
    qmake-qt4 -r main.pro CONFIG+="bundled-celt no-bundled-opus no-bundled-speex no-embed-qt-translations no-g15 no-speechd no-ice no-update"
build      : |
    %make release
install    : |
    %make_install
    # Credit to aur package: https://aur.archlinux.org/packages/mumble-git/
    
    install -m755 -D ./scripts/mumble-overlay %installroot%/usr/bin/mumble-overlay
    install -m755 -D ./release/mumble %installroot%/usr/bin/mumble
    install -m644 -D ./scripts/mumble.desktop %installroot%/usr/share/applications/mumble.desktop
    install -m755 -d %installroot%/usr/share/man/man1
    install -m644 -D ./man/mum* %installroot%/usr/share/man/man1/
    install -m644 -D ./icons/mumble.svg %installroot%/usr/share/icons/hicolor/scalable/apps/mumble.svg
    install -m644 -D ./LICENSE %installroot%/usr/share/licenses/mumble/LICENSE
    install -m755 -D ./release/plugins/liblink.so %installroot%/%libdir%/mumble/liblink.so
    install -m755 -D ./release/plugins/libmanual.so %installroot%/%libdir%/mumble/libmanual.so
    install -m755 -D ./release/libcelt* %installroot%/%libdir%/mumble/
