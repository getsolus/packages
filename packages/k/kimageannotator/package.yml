name       : kimageannotator
version    : 0.7.1
release    : 7
source     :
    - https://github.com/ksnip/kImageAnnotator/archive/refs/tags/v0.7.1.tar.gz : 2335c5be15a5dde34c3333c10a6339da114e2232e4c4642dea1793e491e09677
license    : LGPL-3.0-only
component  : desktop.qt
homepage   : https://github.com/ksnip/kImageAnnotator
summary    : Tool for annotating images
description: |
    Tool for annotating images
builddeps  :
    - pkgconfig(Qt5Designer)
    - pkgconfig(Qt5Svg)
    - pkgconfig(x11)
    - kcolorpicker-devel
clang      : yes
optimize   : thin-lto
setup      : |
    %cmake_ninja -DBUILD_SHARED_LIBS=ON
build      : |
    %ninja_build
install    : |
    %ninja_install

    # Needed for Gwenview 23.08. Remove after switching to Qt6 build
    mkdir -p $installdir/usr/lib64/cmake/kImageAnnotator
    ln -sr $installdir/usr/lib64/cmake/kImageAnnotator-Qt5/kImageAnnotator-Qt5Config.cmake $installdir/usr/lib64/cmake/kImageAnnotator/kImageAnnotatorConfig.cmake
    ln -sr $installdir/usr/lib64/cmake/kImageAnnotator-Qt5/kImageAnnotator-Qt5Config-version.cmake $installdir/usr/lib64/cmake/kImageAnnotator/kImageAnnotatorConfig-version.cmake
    ln -sr $installdir/usr/lib64/cmake/kImageAnnotator-Qt5/kImageAnnotator-targets* $installdir/usr/lib64/cmake/kImageAnnotator/
