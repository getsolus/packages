# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name       : kid3
version    : 3.9.7
release    : 28
source     :
    - https://download.kde.org/stable/kid3/3.9.7/kid3-3.9.7.tar.xz : f9cfeef7d4ddde78ad8978876cb3525843a302504f547c225e9c22c81d710760
homepage   : https://kid3.kde.org
license    : GPL-2.0-or-later
component  :
    - core : multimedia.audio
    - cli : multimedia.audio
    - qt : multimedia.audio
summary    :
    - Efficient audio tagger
    - cli : Audio tagger command-line-interface
    - core : Audio tagger core libraries and data
description:
    - Efficient audio tagger
    - cli : Kid3-cli offers a command-line-interface for Kid3, for a GUI use kid3-qt.
    - core : This package contains libraries and data used by kid3-qt and kid3-cli.
    - qt : Kid3 audio tag editor can edit the tags of MP3, Ogg, FLAC, MPC and WMA files in an efficient way, convert between ID3v1 and ID3v2, set the tags of multiple files, generate tags from file names, etc.
builddeps  :
    - pkgconfig(Qt6Designer)
    - pkgconfig(Qt6Multimedia)
    - pkgconfig(Qt6Qml)
    - pkgconfig(flac)
    - pkgconfig(gstreamer-1.0)
    - pkgconfig(libchromaprint)
    - pkgconfig(taglib)
    - pkgconfig(vorbis)
    - id3lib-devel
    - kf6-kconfig-devel
    - kf6-kconfigwidgets-devel
    - kf6-kdoctools-devel
    - kf6-kio-devel
    - kf6-kwidgetsaddons-devel
    - kf6-kxmlgui-devel
rundeps    :
    - cli : kid3-core
    - qt : kid3-core
clang      : true
optimize   : thin-lto
setup      : |
    %patch -p1 -i $pkgfiles/0001-Remove-inode-directory-from-Mimetypes.patch
    %cmake_ninja \
                 -DWITH_APPS="CLI;Qt;KDE" \
                 -DWITH_GSTREAMER=ON
build      : |
    %ninja_build
install    : |
    %ninja_install
    %install_license COPYING*
patterns   :
    - core :
        - /usr/lib/
        - /usr/share/kid3/translations
        - /usr/share/licenses/kid3/
        - /usr/share/man/man1/kid3.1.gz
    - cli :
        - /usr/bin/kid3-cli
        - /usr/share/man/*/man1/kid3-cli.1.gz
        - /usr/share/man/man1/kid3-cli.1.gz
    - qt :
        - /usr/bin/kid3-qt
        - /usr/share/metainfo/org.kde.kid3-qt.appdata.xml
        - /usr/share/applications/org.kde.kid3-qt.desktop
        - /usr/share/doc/kid3-qt/
        - /usr/share/icons/hicolor/*/apps/kid3-qt.*
        - /usr/share/man/*/man1/kid3-qt.1.gz
        - /usr/share/man/man1/kid3-qt.1.gz
