name       : kmod
version    : 24
release    : 10
source     :
    - https://www.kernel.org/pub/linux/utils/kernel/kmod/kmod-24.tar.xz : 610b8d1df172acc39a4fdf1eaa47a57b04873c82f32152e7a62e29b6ff9cb397
component  : system.base
license    :
    - LGPL-2.1 # for libkmod, testsuite and helper libraries
    - GPL-2.0  # for tools
summary    : Linux kernel module management utilities
description: |
    Linux kernel module management utilities
optimize   :
    - lto
    - size
setup      : |
    %patch -p1 < $pkgfiles/0001-libkmod-Support-usr-lib-to-enable-stateless-configs-.patch
    %configure --bindir=/bin       \
               --disable-manpages  \
               --with-xz           \
               --with-zlib
build      : |
    %make
install    : |
    %make_install
    mkdir $installdir/sbin
    for target in modprobe modinfo rmmod insmod depmod lsmod ; do
        ln -sv /bin/kmod $installdir/sbin/${target}
    done
