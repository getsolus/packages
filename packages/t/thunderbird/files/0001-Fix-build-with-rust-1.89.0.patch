From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Troy Harvey <harveydevel@gmail.com>
Date: Wed, 3 Sep 2025 17:53:00 +1000
Subject: [PATCH] Fix build with rust 1.89.0

Taken from https://github.com/zakarumych/allocator-api2/pull/36
and rebased for bundled version in thunderbird.

Signed-off-by: Troy Harvey <harveydevel@gmail.com>
---
 third_party/rust/allocator-api2/src/stable/vec/mod.rs | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/third_party/rust/allocator-api2/src/stable/vec/mod.rs b/third_party/rust/allocator-api2/src/stable/vec/mod.rs
index 446f50087b..386f706bcb 100644
--- a/third_party/rust/allocator-api2/src/stable/vec/mod.rs
+++ b/third_party/rust/allocator-api2/src/stable/vec/mod.rs
@@ -1899,7 +1899,7 @@ impl<T, A: Allocator> Vec<T, A> {
     #[cfg(not(no_global_oom_handling))]
     #[inline(always)]
     unsafe fn append_elements(&mut self, other: *const [T]) {
-        let count = unsafe { (*other).len() };
+        let count = other.len();
         self.reserve(count);
         let len = self.len();
         unsafe { ptr::copy_nonoverlapping(other as *const T, self.as_mut_ptr().add(len), count) };
