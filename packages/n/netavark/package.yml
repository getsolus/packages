# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name       : netavark
version    : 1.17.1
release    : 3
source     :
    - https://github.com/containers/netavark/archive/refs/tags/v1.17.1.tar.gz : 22cdaea57490014c8faf029d0e2d585d9fddcfcb35fc342f812ba79b27d5d3d1
    - https://github.com/containers/aardvark-dns/archive/refs/tags/v1.17.0.tar.gz#aardvark-dns.tar.gz : 42556bf547c435a8f0ccb586b4f5000da3106a58c26f82e22d9db81ee5bd7eb2
homepage   : https://github.com/containers/netavark
license    : Apache-2.0
summary    : A container network stack
component  : network.util
description: |
    Netavark is a rust based network stack for containers. It is being designed to work with Podman but is also applicable for other OCI container management applications.
    Aardvark-dns is an authoritative dns server for A/AAAA container records. It can forward other requests to configured resolvers.
replaces   : cni-plugins
networking : true
builddeps  :
    - pkgconfig(protobuf)
    - go-md2man
    - rust
build      : |
    mkdir aardvark-dns
    tar --strip-components=1 -xf $sources/aardvark-dns.tar.gz -C aardvark-dns

    %make build docs

    cd aardvark-dns
    %make PREFIX=%PREFIX%
install    : |
    %make_install PREFIX=%PREFIX%

    cd aardvark-dns
    %make_install PREFIX=%PREFIX%
    %install_license LICENSE
