# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name       : nettle
version    : 3.10.2
release    : 23
source     :
    - https://ftpmirror.gnu.org/gnu/nettle/nettle-3.10.2.tar.gz : fe9ff51cb1f2abb5e65a6b8c10a92da0ab5ab6eaf26e7fc2b675c45f1fb519b5
license    : LGPL-3.0-or-later
component  :
    - security.crypto
    - bin : security.crypto
    - ^libhogweed : security.library
    - ^libhogweed-32bit : emul32
    - ^libnettle : system.base
    - ^libnettle-32bit : emul32
homepage   : https://www.lysator.liu.se/~nisse/nettle
summary    :
    - Low level cryptographic library
    - bin : Low level cryptographic library (binary tools)
description: |
    The Nettle package contains the low-level cryptographic library that is designed to fit easily in many contexts.
emul32     : true
# avx2       : true
patterns   :
    - devel :
        - /usr/share/doc
    - bin :
        - /usr/bin
        - /usr/share/info
    - ^libnettle-32bit :
        - /usr/lib32/libnettle*.so.*
    - ^libnettle :
        - /usr/lib64/libnettle*.so.*
        # - /usr/lib64/glibc-hwcaps/x86-64-v3/libnettle*.so.*
    - ^libhogweed-32bit :
        - /usr/lib32/libhogweed*.so.*
    - ^libhogweed :
        - /usr/lib64/libhogweed*.so.*
        # - /usr/lib64/glibc-hwcaps/x86-64-v3/libhogweed*.so.*
builddeps  :
    - pkgconfig32(gmp)
rundeps    :
    - 32bit-devel :
        - gmp-32bit-devel
    - ^libnettle-32bit :
        - gmp-32bit
        - libgcc-32bit
        - libnettle
    - devel :
        - gmp-devel
setup      : |
    %configure --enable-shared \
               --disable-static
build      : |
    %make
install    : |
    %make_install

    chmod 00755 $installdir/%libdir%/lib*.so.*.*
    install -D -m00644 nettle.html $installdir/usr/share/doc/nettle/nettle.html
check      : |
    %make check
