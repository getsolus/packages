# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name       : bup
version    : 0.33.10
release    : 16
source     :
    - https://github.com/bup/bup/archive/refs/tags/0.33.10.tar.gz : 5b7d169b3b0d821dc93c55798e18339594af618f018aae88dff28b8cc6333b00
homepage   : https://bup.github.io
license    :
    - BSD-2-Clause
    - LGPL-2.0-or-later
    - Python-2.0
component  : system.utils
summary    : Efficient backup system based on git
description: |
    Very efficient backup system based on the git packfile format, providing fast incremental saves and global deduplication (among and within files, including virtual machine images).
builddeps  :
    - pkgconfig(python3)
    - git
    - pandoc
    - par2cmdline
    - python-pylibacl
    - python-pytest
    - python-pyxattr
    - python-tornado
    - rsync
rundeps    :
    - git
    - par2cmdline
    - python-pylibacl
    - python-pyxattr
    - python-tornado
build      : |
    %make PYTHON=python3
install    : |
    %make_install PREFIX=%PREFIX% LIBDIR=%libdir%/bup
    %install_license LICENSE

    # Remove docs
    rm -r $installdir/usr/share/doc
#Only run this locally. Takes forever otherwise.
#check      : |
#    rm test/ext/test-help # This test fails
#    make check
