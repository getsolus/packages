# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name       : bottom
version    : 0.12.3
release    : 32
source     :
    - https://github.com/ClementTsang/bottom/archive/refs/tags/0.12.3.tar.gz : 1c70894f0eceb7034075959ff3080cf4706c11d7c012912c24e777abe4e62b70
    - https://github.com/ClementTsang/bottom/releases/download/0.12.3/completion.tar.gz : 1b8ec43e65d72610e29047ed811ad9534563f78a65275ad0fce5d8bd2ffbffe0
    - https://github.com/ClementTsang/bottom/releases/download/0.12.3/manpage.tar.gz : e1f1219f9ad0742384a60a526237c290d309b8c8205698241f060c58c04af89d
homepage   : https://clementtsang.github.io/bottom
license    : MIT
component  : system.utils
summary    : Yet another cross-platform graphical process/system monitor.
description: |
    A cross-platform graphical process/system monitor with a customizable interface and a multitude of features. Supports Linux, macOS, and Windows. Inspired by both gtop and gotop.
networking : true
builddeps  :
    - rust
setup      : |
    %cargo_fetch
    cp $sources/completion.tar.gz .
    cp $sources/manpage.tar.gz .

    tar xf completion.tar.gz
    tar xf manpage.tar.gz
build      : |
    %cargo_build --bin btm
install    : |
    %cargo_install btm
    %install_license LICENSE

    # Completions
    install -Dm00644 btm.bash $installdir/usr/share/bash-completion/completions/btm
    install -Dm00644 _btm $installdir/usr/share/zsh/site-functions/_btm
    install -Dm00644 btm.fish $installdir/usr/share/fish/vendor_completions.d/btm.fish

    # Manpages
    install -Dm00644 btm.1.gz $installdir/usr/share/man/man1/btm.1.gz

    # Desktop
    install -Dm00644 desktop/bottom.desktop $installdir/usr/share/applications/bottom.desktop

    install -Dm00644 assets/icons/bottom-system-monitor.svg $installdir/usr/share/icons/hicolor/scalable/apps/bottom-system-monitor.svg
