name       : budgie-desktop
version    : 10.9.3
release    : 279
source     :
    - https://github.com/BuddiesOfBudgie/budgie-desktop/releases/download/v10.9.3/budgie-desktop-v10.9.3.tar.xz : 959f27e0a4d1c61c4d4ddc41dff7c417b1408c8cc628a434b4151f3c3a0437b1
homepage   : https://blog.buddiesofbudgie.org
license    :
    - GPL-2.0-only
    - LGPL-2.1-only
summary    : A luxurious home computing experience
description: |
    Budgie Desktop is a modern desktop environment developed by the Buddies of Budgie.
component  : desktop.budgie
builddeps  :
    - pkgconfig(accountsservice)
    - pkgconfig(alsa)
    - pkgconfig(gee-0.8)
    - pkgconfig(gnome-desktop-3.0)
    - pkgconfig(gnome-settings-daemon)
    - pkgconfig(gstreamer-1.0)
    - pkgconfig(gtk-doc)
    - pkgconfig(ibus-1.0)
    - pkgconfig(json-glib-1.0)
    - pkgconfig(libcanberra)
    - pkgconfig(libmagpie-0)
    - pkgconfig(libnotify)
    - pkgconfig(libpeas-2)
    - pkgconfig(libpulse-mainloop-glib)
    - pkgconfig(libwacom)
    - pkgconfig(libwnck-3.0)
    - pkgconfig(libxfce4windowing-0)
    - pkgconfig(upower-glib)
    - budgie-screensaver # Required at configure time to ensure we have a proper configuration of budgie-desktop
    - sassc
    - vala
rundeps    :
    - budgie-control-center
    - budgie-screensaver
    - budgie-session
    - gnome-settings-daemon
    - network-manager-applet
    - pipewire
    - switcheroo-control
    - xdg-desktop-portal-gtk
    - xdotool
setup      : |
    %patch -p1 -i $pkgfiles/0001-Port-libpeas-2-support-to-Budgie-10.9.x.patch

    %meson_configure \
        -Dwith-stateless=true \
        -Dbsd-libexecdir="%libdir%/gnome-settings-daemon"
build      : |
    %ninja_build
install    : |
    %ninja_install

    # Stateless XDG
    mv $installdir/etc/xdg/autostart/* $installdir/usr/share/xdg/autostart/
    rmdir $installdir/etc/xdg/autostart
    rmdir $installdir/etc/xdg/
    rmdir $installdir/etc
