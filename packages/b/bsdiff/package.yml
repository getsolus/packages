# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name       : bsdiff
version    : '4.2'
release    : 7
source     :
    - https://www.daemonology.net/bsdiff/bsdiff-4.2.tar.gz : 430c8a902cb60fa7e2c9b239b5de78d470911e7018774a98c1ab5b27815e793b
homepage   : https://www.daemonology.net/bsdiff
license    : BSD-Protection
component  : system.utils
summary    : bsdiff and bspatch are tools for building and applying patches to binary files.
description: |
    bsdiff and bspatch are tools for building and applying patches to binary files. By using suffix sorting (specifically, Larsson and Sadakane's qsufsort) and taking advantage of how executable files change, bsdiff routinely produces binary patches 50-80% smaller than those produced by Xdelta, and 15% smaller than those produced by .RTPatch (a commercial patch tool).
builddeps  :
    - pkgconfig(bzip2)
rundeps    :
    - bzip2
setup      : |
    %patch -p1 -i ${pkgfiles}/implicit-declaration.patch
build      : |
    # The Makefile doesn't do anything, so we have to
    # compile the binaries ourselves.
    ${CC} bsdiff.c -o bsdiff ${CFLAGS} ${LDFLAGS} -lbz2
    ${CC} bspatch.c -o bspatch ${CFLAGS} ${LDFLAGS} -lbz2
install    : |
    install -Dm00755 bsdiff bspatch -t ${installdir}/usr/bin
    install -Dm00644 bsdiff.1 bspatch.1 -t ${installdir}/usr/share/man/man1
    %install_license LICENSE
