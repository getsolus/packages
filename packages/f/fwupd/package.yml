# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name: fwupd
version: 2.0.18
release: 38
source:
    - https://github.com/fwupd/fwupd/archive/refs/tags/2.0.18.tar.gz: 49dada6eb6a6f4e39e899dc4e8c34e92c127164a22d0d1798edb041a5970a320
homepage: https://fwupd.org/
license: LGPL-2.1-or-later
component: system.utils
summary:
    - A simple daemon to allow session software to update firmware
    - tests: Installed tests for fwupd
description: |
    This project aims to make updating firmware on Linux automatic, safe and reliable.
    Additional information is available at the website: https://fwupd.org/
patterns:
    - devel:
          - /usr/share/doc/libfwupd*
    - tests:
          - /usr/lib64/fwupd/installed-tests
          - /usr/share/fwupd/remotes.d/fwupd-tests.conf
          - /usr/share/fwupd/host-emulate.d
          - /usr/share/installed-tests
optimize:
    - no-symbolic
builddeps:
    - pkgconfig(cairo)
    - pkgconfig(efivar)
    - pkgconfig(flashrom)
    - pkgconfig(fwupd-efi)
    - pkgconfig(gi-docgen)
    - pkgconfig(gnutls)
    - pkgconfig(gusb)
    - pkgconfig(jcat)
    - pkgconfig(libarchive)
    - pkgconfig(libcbor)
    - pkgconfig(libdrm)
    - pkgconfig(libeconf)
    - pkgconfig(libelf)
    - pkgconfig(libftdi1)
    - pkgconfig(libgcab-1.0)
    - pkgconfig(libpci)
    - pkgconfig(libprotobuf-c)
    - pkgconfig(libsmbios_c)
    - pkgconfig(libsoup-2.4)
    - pkgconfig(libudev)
    - pkgconfig(mbim-glib)
    - pkgconfig(mm-glib)
    - pkgconfig(pango)
    - pkgconfig(qmi-glib)
    - pkgconfig(sqlite3)
    - pkgconfig(tss2-esys)
    - pkgconfig(umockdev-1.0)
    - pkgconfig(valgrind)
    - pkgconfig(xmlb)
    - bubblewrap
    - font-noto-cjk
    - fwupd-efi
    - git
    - help2man
    - noto-sans-ttf
    - python-cairo
    - python-gobject
    - python-packaging
    - python-pillow
    - shared-mime-info
    - vala
rundeps:
    - fwupd-efi
setup: |
    %apply_patches
    %meson_configure \
        -D supported_build=enabled \
        -D docs=enabled \
        -D bluez=enabled \
        -D cbor=enabled \
        -D libdrm=enabled \
        -D plugin_modem_manager=enabled \
        -D plugin_flashrom=enabled
build: |
    %ninja_build
install: |
    %ninja_install
check: |
    %ninja_check
