# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name: fritzing-parts
version: 1.0.6
release: 10
source:
    # This must be a git clone according to: https://github.com/fritzing/fritzing-app/wiki/2.1-Part-file-format
    # Use latest commit from the release branch of the current version.
    - git|https://github.com/fritzing/fritzing-parts.git: 73bc0559bb8399b2f895d68f032e41d7efc720c0
homepage: https://fritzing.org/
license: CC-BY-SA-3.0
component: programming
summary: Fritzing parts
description: |
    Fritzing data file of supplemental parts.
builddeps:
    - fritzing
install: |
    install -dm00755 $installdir/usr/share/fritzing
    cp -a $sources/fritzing-parts.git $installdir/usr/share/fritzing/fritzing-parts

    # Build the parts database.
    Fritzing \
        -f /usr/share/fritzing \
        -pp $installdir/usr/share/fritzing/fritzing-parts \
        -db $installdir/usr/share/fritzing/fritzing-parts/parts.db \
        -platform offscreen

    # Remove unnecessary files
    rm -r $installdir/usr/share/fritzing/fritzing-parts/.git*
    rm $installdir/usr/share/fritzing/fritzing-parts/*.md
    rm $installdir/usr/share/fritzing/fritzing-parts/*.txt
