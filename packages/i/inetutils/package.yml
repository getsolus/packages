# yaml-language-server: $schema=/usr/share/ypkg/schema/schema.json
name       : inetutils
version    : '2.7'
release    : 16
source     :
    - https://mirror.ibcp.fr/pub/gnu/inetutils/inetutils-2.7.tar.gz : a156be1cde3c5c0ffefc262180d9369a60484087907aa554c62787d2f40ec086
homepage   : https://www.gnu.org/software/inetutils
license    :
    - GPL-3.0-or-later
summary    :
    - A collection of common network programs
    - ^ifconfig : The deprecated ifconfig command
description:
    - A collection of common network programs
    - ^ifconfig : The deprecated ifconfig command.
component  :
    - system.base
    - ^ifconfig : network.util
patterns   :
    - ^ifconfig :
        - /usr/bin/ifconfig
        - /usr/share/man/man1/ifconfig.1*
builddeps  :
    - help2man
optimize   :
    - lto
environment: |
    # gcc 14
    export CFLAGS="${CFLAGS} -Wno-implicit-function-declaration"
setup      : |
    %patch -p1 -i $pkgfiles/fix-injection-bug-bogus-user-names.patch
    %patch -p1 -i $pkgfiles/sanitize-variable-expansions.patch

    %configure --disable-logger \
               --disable-ping \
               --disable-ping6 \
               --disable-servers \
               --disable-whois
build      : |
    %make
install    : |
    %make_install

    # Cleanup
    rmdir -v $installdir/%libdir%/${package} \
             $installdir/%libdir%
    find $installdir -type d -empty -delete -print
